<!-- ====================================================================== -->
<!-- Ku00 ToKzYa -->
<!-- ====================================================================== -->
<!DOCTYPE html>
<html>
	<head>
		<!-- CORE -->
		<title>PowerOurPeople: LabEast Wantware</title>
		<link rel="shortcut icon" type="image/png" href="Mx01__SuKz_MEDIA/SuKz07_DryDz__BIZ/DryDzGwz00__ESSENCE.png"/>
		<link rel="canonical" href="https://powerourpeople.com"/>

		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="robots" content="index, follow">

		<!-- OPEN_GRAPH: Social Media Finder -->
		<meta property="og:title" content="Power Our People Website" />
		<meta property="og:description" content="Learn more about Wantware and empowering the 99% of the world that does not program" />
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://powerourpeople.com" />
		<meta property="og:image" content="http://powerourpeople.com/Mx01__SuKz_MEDIA/SuKz07_DryDz__BIZ/DryDzGwz00__ESSENCE.png" />

		<!-- STYLE & MEDIA -->
		<!-- <link rel="stylesheet" href="Mx07__SuSmi_WEBPG/SuSmi02__CSS/JoDx00__Do.css"> -->

		<!-- SCRIPTS -->
		<!-- <script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa00__HEXCIRC.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa01__DROPZ.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa02__PLAZ.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa03__ETHER.js"></script>

		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa04__AURORA.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa05__HEXSCROLL.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa06__SUNRISE.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa07__CODEX.js"></script> -->

		<script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki00__PUB.js"></script>
		<!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki01__CORE.js"></script> -->
		<!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki02__LANG.js"></script> -->
		<!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki03__CFG.js"></script> -->

		<script src="//cdn.jsdelivr.net/npm/qrcode@latest/build/qrcode.min.js"></script>


		<script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru00__SyDe.js" type="application/javascript"></script>
		<!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru00__SyZx.js" type="application/javascript"></script> -->
		<!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru01__Tra.js" type="application/javascript"></script> -->

	</head>


	<!-- ====================================================================== -->
	<!-- Ku01 STYLE
	<!-- ====================================================================== -->
<style>
  * {
	  box-sizing: border-box;
	}

	body
	{
		background-color: #EE6;
		max-width: 800px;
		font-family: Impact;
		font-size: 1.25em;
		text-align: center;
		margin: auto;
		width: 100%;
		padding: 0.5em;
	}

	pre
	{
		background-color: #FFF;
		color:#000;
		border-style: groove;

	  width: 100%;
	  padding: 0 em;
	  margin: auto;

	  border-radius: 1px;
      border-color: #F00;

	  text-align: center;
	  word-wrap: break-word;
	  white-space: pre-wrap;
	  /* line-height: 1.em; */

	  font-family: monospace;
	  font-size: 0.125em;

	}


	input
	{
	    background-color: #00F;
    	color: #EE6;

		font-family: Arial Bold;
		font-size: 1.25em;

		border-style: groove;

		word-wrap: normal;
	  	white-space: pre-wrap;

		text-align: left;

		width: 100%;
		height: 2.0em;
  }


  .BUF
  {
	background-color: #FFF;
	color: #00A;
    width: 100%;
    padding: 1.0 em;
	margin: 1.0 em;

	border-color: #00F;
    border-radius: 3px;
	border-style: groove;

    text-align: left;

    word-wrap: break-word;
    white-space: pre-wrap;
	line-height: 1.0em;

	font-family: Arial, Helvetica, sans-serif;
	font-size: 1.0em;
  }

  button
  {
    border-radius: 15px;
    background-color: #F22;
    color: white;
    border: none;
    padding: 0.25em 1em;
    font-size: 1.25em;
    margin-top: 0.5em;
  }



</style>


	<!-- ====================================================================== -->
	<!-- Ku01 BODY Bz
	<!-- ====================================================================== -->
	<body >
<div>

	<h1 id="VyBzVa" >FAM_KOLB: Msg-Room Test </h1>
	<br>
	<p>People in Room: <span id="connected">no</span></p>
	<br>
	<pre id="QRKode" class="QRKode" style="display: none" ></pre>
	<br>

	<div>
		<h2>TESTO</h2>
		<br>
  		<button id="Tst_A">Tst_A</button>
		<button id="Tst_B">Tst_B</button>
		<button id="Tst_C">Tst_C</button>
		<button id="Tst_D">Tst_D</button>
		<!-- <button id="Tst_E">Tst_E</button> -->
	</div>
	<br>


<div id="ui" style="display: none">

  <h2>INPUT</h2>
  <br>
  <input id="message" maxlength="279" placeholder="TYPE HERE..."/>
  <br>
  <button id="send">Send MSG</button>
  <button id="copy">Copy Room ID</button>
  <button id="email">Email Room ID</button>

  <p class="button"><a href="WzMx.html" target="_NEW">Launch New HOST.</a></p>

</div>

	<h2>MESSAGES</h2>
	<p id="messages" class="BUF"></p>
	<br>

	<h2>LOG</h2>
	<p id="log" class="BUF"></p>
	<br>


</div>
</body>


<!-- ====================================================================== -->
<!-- Ku01 SCRIPT
<!-- ====================================================================== -->
<script>

	// VAR
	var connected = false;
	var JOIN_y = ( window.location.hash.length > 1 ) ? true : false ;
	var msglist = document.getElementById("messages");
	var b;
	var messages = [];
	var HUB__Vy_vsg;
	var KeDru__Fo_wu = 0;


	// PROG BEGIN
	document.getElementById("VyBzVa").textContent += VER_vsg;


//@@@
// JOINER
if( JOIN_y )
{
	var HUB__Vy_vsg = window.location.hash.substr(1) || "bUH7ukDvd9R2xLLRKMKWZ1mGPkgdVfufye";
	b = new Bugout(HUB__Vy_vsg);

	// msglist.textContent = "Join = Hub @" + HUB__Vy_vsg + "\nSelf @" + b.address().slice( 0, 4 );
	log( "SPOKE @", b.address().slice( 0, 4 ), "\n" );



	// if the user clicks the send button
	document.getElementById("send").onclick = function(ev)
	{
		var m = document.getElementById("message");
		if (m.value)
		{
			msglist.textContent = "Sending message...";

			b.rpc("post", m.value, function ()
			{
				// server will send refresh message if messages are changed
			 	//refreshMessages();
			});
			m.value = "";
		}
	}

	// watch for connection to the server
	b.on("server", function()
	{
		refreshMessages();
	});


	b.on("message", function( adr, msg)
	{
		if (msg == "refresh")
		{
			refreshMessages();
		}
		else
		{
			log("- MSG( Spoke ):", adr.slice( 0, 4 ), msg);
		}
	});

	b.on("Je", function( adr, msg) { log( "- RECV( Spoke ): ", adr.slice( 0, 4 ), msg ); });


}

// ======================================================================
// HUB
// ======================================================================
else
{
	//@@@
	// instantiate our bugout instance
	b = new Bugout({seed: localStorage["TaKeDru_VxYa"]});

	// save the seed for next time
	localStorage["TaKeDru_VxYa"] = b.seed;

	HUB__Vy_vsg = b.seed;

	// log this server's address
	log( "- HUB @", b.address().slice( 0, 4 ), "\n" );


	// load messages from previous run
	if (localStorage["TaKeDruKz"])
	{
		messages = JSON.parse(localStorage["TaKeDruKz"]);
	}
	if (typeof(messages) != "object" || !messages["length"])
	{ messages = []; }


	//---------------------------
	// PING
	//---------------------------
	b.register("ping", function( adr, args, cb)
	{
		args["pong"] = Math.random();
		cb(args);
	});

	//---------------------------
	//---------------------------
  b.register("post", function( adr, message, cb)
  {
	  if (typeof(message) == "string" && message.length < 280)
	  {
		  var m = {address: adr, m: message, t: (new Date()).getTime()};

		  log("messageboard:", m);

		  messages.push(m);
      		messages = messages.slice(Math.max(0, messages.length - 8 ));

      		localStorage["TaKeDruKz"] = JSON.stringify(messages);

			cb(true);

	      b.send("refresh");
    } else
	{
		cb(false);
    }
}, "Post a message to the board");


	//---------------------------
	//---------------------------
	b.register("list", function( adr, args, cb)
	{
		cb(messages.slice().reverse());
	}, "List most recent messages");


	//---------------------------
	//---------------------------
  b.on("connections", function(c)
  {
	  if (c == 0 && connected == false )
	  {
		  connected = true;
		  // log("FIRST NODE");

		  // link to the messageboard client URL
		  // var clientURL = document.location.href.replace("Mx", "Me") + "#" + b.address();
		  var clientURL = document.location.href + "#" + b.address();

   	  	//  log(qr(clientURL));
		document.getElementById("QRKode").textContent = qr(clientURL);
		document.getElementById("QRKode").style.display = "block";
	}

	//	log( "- Spoke[ ", c, "] Joined @ ", clientURL );
  });

  	//---------------------------
	 // log when we see a new client adr
	//---------------------------
  	b.on("seen", function( adr ) { log("- Spoke Joined @ ", adr.slice( 0, 4 )  ); });
  	b.on("left", function( adr ) { log("- Spoke Exited @ ", adr.slice( 0, 4 )  ); });

  	//---------------------------
	// MSG
	//---------------------------
	b.on("message", function( adr, msg) { log( "- MSG( Hub ): ", adr.slice( 0, 4 ), msg ); });
	b.on("Je", function( adr, msg) { log( "- RECV( Hub ): ", adr.slice( 0, 4 ), msg ); });


	//---------------------------
	// RPC
	//---------------------------
	// log when a client makes an rpc call
	b.on("rpc", function( adr, call, args)
	{
	//	log("FN:", adr, call, args);
	//	log( "- ", call, " = ", args);
		log( "- FN: ", call );

	});
}

//@@@
// END JOIN or HUB




//---------------------------
// INIT LOG
//---------------------------

// log( "Self_ID: ", b.address().slice( 0, 4 ) );
// log( " Fam: ", b.localFamily, " Loc: ", b.localAddress, " Rem: ", b.remoteAddress );

b.heartbeat( 30000 );

//---------------------------
// WIRES
//---------------------------
// if we see a wire join or leave
b.on("wireseen", updateWires);
b.on("wireleft", updateWires);


function updateWires(count)
{
  if (count)
  {
    document.getElementById("ui").style.display = "block";
  }

  // b.torrent.wires.length
  document.getElementById("connected").textContent = count ? "yes ( " + count + " )" : "no";

}

//---------------------------
// TST
//---------------------------

	document.getElementById("Tst_A").onclick = function(evt)
	{
		log( "\n- Tst_A @ ", b.Fe_vsg().toString() );

		KeDru__Fo_wu++;

		// DATA
		// From a length
		const To_vbu = new Uint8Array( KeDru__Fo_wu + 3 );

		// CORS Kills Use
		// const ToDu_vbu = new SharedArrayBuffer( KeDru__Fo_wu + 3 );
		// const To_vbu = new Uint8Array( ToDu_vbu );

		//		const To_vbu = new SharedArrayBuffer( 4 );

		// 		// 1. Create a SharedArrayBuffer
		// // The size is in bytes (e.g., 1024 bytes for a 1KB buffer)
		// const sharedBuffer = new SharedArrayBuffer(1024);

		// // 2. Create a Uint8Array view over the SharedArrayBuffer
		// // This creates a typed array that interprets the buffer's contents as 8-bit unsigned integers.
		// const sharedUint8Array = new Uint8Array(sharedBuffer);

		// // Now, sharedUint8Array can be used to read and write data.
		// // Any changes made to sharedUint8Array in one thread will be visible in other threads
		// // that also have a view over the same sharedBuffer.

		// // Example of setting a value:
		// sharedUint8Array[0] = 255;

		// // You can then pass sharedBuffer (or sharedUint8Array itself if the environment supports it)
		// // to a Web Worker to enable shared memory communication.


		To_vbu[0] = KeDru__Fo_wu;

		// console.log(To_vbu[0]);
		// console.log(To_vbu.length);
		// console.log(To_vbu.BYTES_PER_ELEMENT); // 1

		try{ b.Me( null, To_vbu ); } catch(e){ log( "Me FAILED" ); }

	}

	document.getElementById("Tst_B").onclick = function(evt)
	{
		log( "\n- Tst_B @ ", b.Fe_vsg().toString() );



	}

	document.getElementById("Tst_C").onclick = function(evt)
	{
		log( "\n- Tst_C", b.Fe_vsg().toString() );

		try{ b.Me( null,  { "Me" : i  } ); } catch(e){ log( "Me FAILED" ); }


	}

	document.getElementById("Tst_D").onclick = function(evt)
	{
		log( "\n- Tst_D", b.Fe_vsg().toString() );

		var i = 0;
		for( var adr in b.wires )
		{
	  	 	// log( "- Person[", i, "]: ", b.peers[ i ].timestamp ); timestamp = NONE
	  	 	log( "- Person[", i, "]: ", adr.slice( 0, 4 ) );
			i++;

			try{ b.Me( adr,  { "Me" : i  } ); } catch(e){ log( "Me FAILED" ); }
		}
	}


//---------------------------
// UTILITY FUNCTIONS
//---------------------------
function refreshMessages()
{
  msglist.textContent = "Refreshing messages...";


  // get a list of the messages
  b.rpc("list", null, function(messages)
  {
    updateMessagelist(messages);
  });

}

function updateMessagelist(messages)
{
  msglist.textContent =
    messages.map(function (m)
	{
      return m.m;

	//   return (new Date(m.t)).toString() + "\n" +
    //   "From: " + m.adr.slice( 0, 4 ) + "\n" +
    //   "\n" + m.m + "\n";

    }).join("\n\n");

}

//---------------------------
// LOG
//---------------------------
function log()
{
    var args = Array.prototype.slice.call(arguments);
    console.log.apply(null, args);

	args = args.map(function(a) { if (typeof(a) == "string") return a; else return JSON.stringify(a); });
    document.getElementById("log").textContent += args.join(" ") + "\n";
}

//---------------------------
// QR
// generate a text based qr code
//---------------------------
function qr(txt)
{
    var q = QRCode.create(txt);

    var code = "\n\n";
    for (var i=0; i<2; i++) {
      code += "  ████";
      for (var j=0; j<q.modules.size; j++) {
        code += "██";
      }
      code += "████\n";
    }
    for (var i=0; i<q.modules.size; i++) {
      code += "  ████";
      for (var j=0; j<q.modules.size; j++) {
        code += q.modules.data[i * q.modules.size + j] ? "  " : "██";
      }
      code += "████\n";
    }
    for (var i=0; i<2; i++) {
      code += "  ████";
      for (var j=0; j<q.modules.size; j++) {
        code += "██";
      }
      code += "████\n";
    }
    return code + "\n\n";
}

</script>


<!-- ====================================================================== -->
<!-- END
 <!-- ====================================================================== -->

</html>

<!-- ====================================================================== -->
<!-- ToKzYi -->
<!-- ====================================================================== -->
