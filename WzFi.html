<!-- ====================================================================== -->
<!-- Ku00 ToKzYa -->
<!-- ====================================================================== -->
<!DOCTYPE html>
<html>

<head>
    <!-- CORE -->
    <title>PowerOurPeople: LabEast Wantware</title>
    <link rel="shortcut icon" type="image/png" href="Mx01__SuKz_MEDIA/SuKz07_DryDz__BIZ/DryDzGwz05__LAB_EAST.png" />
    <link rel="canonical" href="https://powerourpeople.com" />

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">

    <!-- OPEN_GRAPH: Social Media Finder -->
    <meta property="og:title" content="Power Our People Website" />
    <meta property="og:description" content="Learn more about Wantware and empowering the 99% of the world that does not program" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://powerourpeople.com" />
    <meta property="og:image" content="http://powerourpeople.com/Mx01__SuKz_MEDIA/SuKz07_DryDz__BIZ/DryDzGwz05__LAB_EAST.png" />

    <!-- STYLE & MEDIA -->
    <!-- <link rel="stylesheet" href="Mx07__SuSmi_WEBPG/SuSmi02__CSS/JoDx00__Do.css"> -->

    <!-- SCRIPTS -->
    <!-- <script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa00__HEXCIRC.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa01__DROPZ.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa02__PLAZ.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa03__ETHER.js"></script>

		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa04__AURORA.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa05__HEXSCROLL.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa06__SUNRISE.js"></script>
		<script defer src="Mx07__SuSmi_WEBPG/SuSmi01__JS/JiJa07__CODEX.js"></script> -->

    <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki00__PUB.js"></script>
    <!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki01__CORE.js"></script> -->
    <!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki02__LANG.js"></script> -->
    <!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Ki03__CFG.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>

    <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru00__SyDe.js" type="application/javascript"></script>
    <!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru00__SyZx.js" type="application/javascript"></script> -->
    <!-- <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru05__Hra4_Bru01__Tra.js" type="application/javascript"></script> -->

    <script src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru00__Hrz4_Bu.js" type="application/javascript"></script>

</head>


<!-- AUDIO -->
<audio id="ToMi_JaPe">
	<!-- <source src="Mx01__SuKz_MEDIA/SuKz01_JaPe__SND/PeJo04__JeMx_BEEP.mp3" type="audio/mp3"> -->
	<source src="Mx01__SuKz_MEDIA/SuKz01_JaPe__SND/JaPe00__ToMi.wav" type="audio/wav">
	WARNING Your browser does not support the audio element.
</audio>


<!-- ====================================================================== -->
<!-- Ku01 STYLE
	<!-- ====================================================================== -->
<style>
    *
    {
        box-sizing: border-box;
    }

    html
    {
        margin: 0;
        padding: 0;
        color: #000;
		font-family: Arial, Helvetica, sans-serif;
    }

    body
    {
        background-color: #EE6;
        max-width: 800px;

        font-size: 1.0em;
        text-align: center;
        margin: auto;
        padding: 1.0em;

        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    h1
    {
        font-family: Impact, sans-serif;
        text-align: center;
    }
    h2
    {
        font-family: sans-serif;
        text-align: center;
    }


    input, textarea
    {
        background-color: #00F;
        color: #EE6;
        border-style: groove;

        word-wrap: normal;
        white-space: pre-wrap;

        text-align: center;
		resize: none;

		font-family: Arial, Helvetica, sans-serif;
		font-size: 1.5em;
    }

    button
    {
        border-radius: 16px;
        background-color: #F22;
        color: white;


        border: none;
        padding: 0.5em 1em;
        font-size: 1.0em;
    }

    button:hover
    {
        color: #F22;
        background-color: white;
		font-family: bold sans-serif;
    }

    /* unvisited link */
    a:link
    {
        color: #FFF;
    }

    /* visited link */
    a:visited
    {
        color: #DDD;
    }

    /* mouse over link */
    a:hover
    {
        color: #BBF;
    }

    /* selected link */
    a:active
    {
        color: #FFB;
    }

	ul
	{
		 list-style-type: none;
		margin: 0; /* Remove default margins */
		padding: 0; /* Remove default padding */
	}


    li
    {
		line-height: 1.0em;
	    font: italic 1.0em sans-serif;
		padding: 0px;
		margin: 0px 0px 0px 0px;
		margin-bottom: 0px; /* Control space between items */

		text-indent: -0.9rem;
    }

  li::before
  {
    content: "➡️ ";
  }

    .BUF
    {
        background-color: #FFF;
        color: #00A;
        width: 100%;
		height: 16em;
        padding: 1.0 em;
        margin: 1.0 em;

        border-color: #00F;
        border-radius: 2px;
        border-style: groove;

        text-align: left;

        word-wrap: break-word;
		overflow-y: scroll;
        white-space: pre-wrap;
        line-height: 1.0em;

        font-size: 1.0em;
    }

    .BOX
    {
        border-color: #DD5;
        border-radius: 32px;
        border-style: double;
        border-width: 8px;
        padding: 1em 1em;
    }


	#SF_MxPo
	{
        border-color: #00F;
        border-radius: 2px;
        border-style: groove;

        padding: 0em 0em;

		width: calc(100% - 0.5em );
		aspect-ratio: 1.0;
	}

    #QRDiv
    {
        margin-top: 20px;
    }


    #content
    {
        text-align: center;
        display: flex;
        flex-direction: column;
        padding: 10px;
        margin: 0 auto;
        min-width: 360px;
        max-width: 1280px;
        width: calc(100% - 0.5em );
    }

    #content
    {
        max-width: 800px;
        min-height: 100%;

        justify-content: center;
    }

    #content .textual
    {
        color: #DDD;
    }

    #content .textual
    {
        font-size: 1em;
    }

    #content a:visited
    {
        color: #FF7700;
    }

    #content a
    {
        color: #0077FF;
    }


    #rc-demo
    {
        display: flex;
        flex-direction: column;
        margin: auto;
    }

    #rc-demo button
    {
        border: none;
        cursor: pointer;
    }

    #rc-demo .color
    {
        max-width: 20px;
        width: 20px;
        height: 20px;
        position: relative;
    }

    #rc-demo canvas
    {
        image-rendering: auto;
        width: fit-content;
    }


    #rc-demo .erase
    {
        position: absolute;
        top: 2px;
        left: 1px;
    }

    #rc-demo .arrow
    {
        border: none;
        position: absolute;
        top: 0;
        left: -17px;
        cursor: auto;
        color: white;
    }

    #rc-demo .hidden
    {
        display: none;
</style>


<!-- ====================================================================== -->
<!-- Ku01 BODY Bz
<!-- ====================================================================== -->

<body>
    <h1  id="VyBzVa">SELF_SERV v</h1>
	<img style="position:absolute; left: 4px;" width="10%" src="Mx01__SuKz_MEDIA/SuKz07_DryDz__BIZ/DryDzGwz05__LAB_EAST.png"></img>
	<br>

    <div class="BOX">
        <h2 id="DuKu_VaSy">#1 JOIN</h2>

        <h3>People in Room: <span id="KeDyCha">no</span></h3>
        <h3>Your Name:</h3>
        <input id="SaNo_VaSy" maxlength="63" value="?" style="width: 50%;" />
        <br><br>
        <button id="SaNo_VaSy_Tra">Sync Name</button>
        <button id="SaNoKu_ChxGry">Erase History</button>
        <br>
        <div id="QRDiv"></div>
        <br>
        <button id="Me_CLIP">Copy</button>
        <button id="Me_EMAIL">Email </button>
        <button id="Me_SMS">Txt</button>
        <button id="Me_URL_ROOM"><a href="WzFe.html" target="_NEW">New Room</a></button>
        <button id="Me_SHARE">Share</button>
    </div>
    <br>
    <br>

    <div id="TaKeDruGry" class="BOX">
        <h2>#2 MESSAGES</h2>
        <h3>Your Message:</h3>
        <textarea id="SaNo_MeKz" rows="5" columns="32" style="width: 75%;" />Testo</textarea>
        <br>
        <br>
        <button id="MeKeDru_Gry">Send All</button>
        <button style="display: none;" id="MeKeDru_0" >Send 0</button>
        <button style="display: none;" id="MeKeDru_1" >Send 1</button>
        <button style="display: none;" id="MeKeDru_2" >Send 2</button>
        <button style="display: none;" id="MeKeDru_3" >Send 3</button>
        <br>
        <h3>Message History:</h3>
        <div id="TaKeDru_Ku" class="BUF"></div>
    </div>
    <br>
    <br>

    <div class="BOX">
        <h2>#3 MAP_MAKER</h2>


        <div id="content">
            <div id="rc-demo">
                <div id="outer-container">
                    <div style="display: flex; align-items: center; gap: 4px">
                        <label for="enable-srgb">Brighten</label>
                        <input type="checkbox" id="enable-srgb" checked>
                    </div>
                </div>

                <details style="cursor: pointer; display: none;">
                    <summary>GFX_Tweaks</summary>

                    <div style="display: none; align-items: center; gap: 4px;">
                        <input type="checkbox" id="bilinear-fix">
                        <label for="bilinear-fix">Bilinear Fix</label>
                    </div>

                    <div style="display: flex; align-items: center; gap: 4px;">
                        <input type="checkbox" id="disable-mips">
                        <label for="disable-mips">Disable Mips</label>
                    </div>

                    <div style="display: flex; align-items: center; gap: 4px;">
                        <input type="checkbox" id="nonlinear-accumulation">
                        <label for="nonlinear-accumulation">Non-Linear Accumulation</label>
                    </div>

                    <div style="display: flex; align-items: center; gap: 4px">
                        <input type="checkbox" id="add-noise">
                        <label for="add-noise">Naive GI Noise</label>
                    </div>

                    <div style="display: none; align-items: center; gap: 4px">
                        <input type="checkbox" id="ringing-fix">
                        <label for="ringing-fix">Ringing Fix</label>
                    </div>

                    <div id="additional-controls-container">
                    </div>

                    <div style="display: flex; align-items: center; gap: 8px">BLOOM<input id="rc-sun-angle-slider" class="slider" type="range" min="0" max="6.2" step="0.1" value="2.0" />
                    </div>

                    <div style="display: flex; align-items: center; gap: 4px">
                        <input type="checkbox" id="reduce-demand">
                        <label for="reduce-demand">Reduce Demand (Calculate over 2 frames)</label>
                    </div>
                </details>
                <br />
                <div id="rc-canvas"></div>
			</div>
		</div>
		<br>
		<br>
		<button id="ChyGe__GaZo">^<br>||</button>
		<br>
		<button id="ChyGe__GxZe"><==</button>
		<span> + </span>
		<button id="ChyGe__GxZo">==></button>
		<br>
		<button id="ChyGe__GaZe">||<br>v</button>
	</div>
	<br>
	<br>
	<div id="GAME_TEST" class="BOX">
		<h2>#4 GAME TEST</h2>

		<img style="position:center;" src="Mx01__SuKz_MEDIA/SuKz02_JaPo__PICT/JaPo__SF/SF_P00.png"></img>
		<br>
		<br>
		<canvas id="SF_MxPo" width="512" height="512"></canvas>

		<br>
		<button id="ChyGe__GaZo">^<br>||</button>
		<br>
		<button id="ChyGe__GxZe"><==</button>
		<span> + </span>
		<button id="ChyGe__GxZo">==></button>
		<br>
		<button id="ChyGe__GaZe">||<br>v</button>
		<br>
		<br>
		<button id="MxHi"; onclick="HraBu_ChyMxHi();" style="display: block;">Use Fullscreen</button>
		<button id="MxDe"; onclick="HraBu_ChyMxDe();" style="display: none;">Use Window</button>
	</div>
	<br>
    <br>
    <div class="BOX">
        <h2>#5 LOG</h2>
        <div id="SmaDx" class="BUF"></div>
    </div>



    <script id="radiance-cascades-logic" src="Mx07__SuSmi_WEBPG/SuSmi01__JS/Kru03__Hrz2_Wy.js" type="application/javascript"></script>

</body>


<!-- ====================================================================== -->
<!-- Ku01 SCRIPT
<!-- ====================================================================== -->
<script>
    // VAR
    const SPOKE_y = ( window.location.hash.length > 1 ) ? true : false;
    let HraBru;
    let HUB__Vy_vsg;
    let URL_HUB__Vy_vsg;

	//@@@
	// IMG
	const BG_JaPo = new Image();
	const Dz_TaJaPo = [];

	//@@@
	// MSGS
	let Ta_VaVy_VaSy = new Map();

//	let Ta_KeDru = [ { "t": 0, "n": 0, "m": "Messages" } ];
	let Ta_KeDru = [ "Messages" ];

	let Ta_SmaDx = [ "Log" ];

    let JeKz__Fo_du = 0;
	let KeDru__GeZo_du = 0;
	let SmaDx__GeZo_du = 0;


    let GeGx = 128;
    let GeGa = 128;
	let GeKwe = 5;


	//@@@
    // APP TITLE
    document.getElementById( "VyBzVa" ).textContent += VER_vsg;

	//@@@
	// SHARE CTRLS
    document.getElementById( "Me_SHARE" ).style.display = (navigator.share) ? "block" : "none";


	//@@@
	// SCREENS
	// NOT _ALLOWED_
	// NotAllowedError: Transient activation is required to request permission.
	// HraBu_MzMxPo();


	//!!!
	// CLEAR LOCAL STORAGE
	// BraHi: 5 MiB
	// String ONLY
	// INSECURE
	// localStorage.clear();
	SmaDx( "Secure:", window.isSecureContext, " Online: ", navigator.onLine, " LocStore_Fo:", localStorage.length );


	//$$$
	// Sme
	// localStorage.debug = "HraBru";
	localStorage.removeItem( "debug" );


    // ======================================================================
    // ADR_BEGIN: HUB OR SPOKE
    // ======================================================================

    //@@@
    // SPOKE
    if ( SPOKE_y )
    {
		// ADR GEN
		// substr(1) skips the 'HASH SYMBOL' for PAGE TARGET
        let HUB__Vy_vsg = window.location.hash.substr( 1 ) || "bUH7ukDvd9R2xLLRKMKWZ1mGPkgdVfufye";
        HraBru = new HraBruKz( HUB__Vy_vsg );

		// ADR PUB
        URL_HUB__Vy_vsg = document.location.href;
        document.getElementById( "DuKu_VaSy" ).textContent = "#1 HUB Joined";
    }
	//@@@
	// HUB
    else
    {
        //&&&
        // SEED
        HraBru = new HraBruKz( { seed: localStorage[ "TaKeDru_VxYa" ] } );
        localStorage[ "TaKeDru_VxYa" ] = HraBru.seed;

        HUB__Vy_vsg = HraBru.seed;
        URL_HUB__Vy_vsg = document.location.href + "#" + HraBru.address();
        document.getElementById( "DuKu_VaSy" ).textContent = "#1 HUB Hosting";
    }

    // ======================================================================
    // ADR_END: SPOKE or HUB
    // ======================================================================

    //---------------------------
    // POST_ADR_INIT
    //---------------------------
    // SmaDx( " Fam: ", HraBru.localFamily, " Loc: ", HraBru.localAddress, " Rem: ", HraBru.remoteAddress );

	//@@@
	// PULSE ms
    HraBru.heartbeat( 12 * 1000 );


	//@@@
	// SELF NAME
    const SaNo_VaSy_l = document.getElementById( 'SaNo_VaSy' );
    SaNo_VaSy_l.value = localStorage.SaNo_VaSy ? localStorage.SaNo_VaSy : HraBru.address().slice( 0, 5 );

	Ta_VaVy_VaSy.set( HraBru.address, SaNo_VaSy_l.value );

	SmaDx( SPOKE_y ? "SPOKE@" : "HUB@", SaNo_VaSy_l.value );

	//@@@
	// MSG FOCUS
    const SaNo_MeKz_l = document.getElementById( 'SaNo_MeKz' );
    SaNo_MeKz_l.value = localStorage.SaNo_MeKz ? localStorage.SaNo_MeKz : "Test Message";
	SaNo_MeKz_l.focus();


	//@@@
	// SF
	SF_Ya();

    //---------------------------
    // EVT_SPOKES
	// Join or Exit
    //---------------------------
    function SPOKE__FoYy( count )
    {
        // HraBru.torrent.wires.length = count
		count += 1; // SERVER = +1
        document.getElementById( "KeDyCha" ).textContent = count ? "yes ( " + count + " )" : "no";
    }
	HraBru.on( "wireseen", SPOKE__FoYy );
    HraBru.on( "wireleft", SPOKE__FoYy );

	HraBru.on( "seen", function( adr )
	{
		// Use Initials to start
		Ta_VaVy_VaSy.set( adr, adr.slice( 0, 5 ) );

		SmaDx( "Spoke Join @ ", Ta_VaVy_VaSy[ adr ] );

		let c = 0;
		for( let adr in Ta_VaVy_VaSy )
		{
			SmaDx( c, " = ", Ta_VaVy_VaSy[ adr ] );

		}

	} );
	HraBru.on( "left", function( adr )
	{
		SmaDx( "Spoke Exit @ ", Ta_VaVy_VaSy[ adr ] );

		Ta_VaVy_VaSy.delete( adr );

	} );


    //---------------------------
    // QR
    //---------------------------
    const qrCodeContainer = document.getElementById( 'QRDiv' );
    // Clear any existing QR code
    qrCodeContainer.innerHTML = '';
    // Create a new canvas element
    const canvas = document.createElement( 'canvas' );
    qrCodeContainer.appendChild( canvas );

    QRCode.toCanvas( canvas, URL_HUB__Vy_vsg,
    {
        width: 200,
        height: 200
    }, function( error )
    {
        if ( error )
        {
            console.error( error );
        }
    } );


    //---------------------------
	// AUDIO PLAY
    //---------------------------
	let ToMi_JaPe = document.getElementById( "ToMi_JaPe" );
	function ToMi_JaPe__Ya()
	{
		// SmaDx( "Aud" );
		ToMi_JaPe.play();
	}

	function ToMi_JaPe__Yi()
	{
		ToMi_JaPe.pause();
	}

	//---------------------------
	// SHARE HUB LINK
	//---------------------------
	document.getElementById( "Me_SHARE" ).onclick = function (evt )
	{
		if (navigator.share)
		{
			navigator.share(
			{
				title: 'Self_Serv Shared Link',
				text: 'To Join a Self_Serv Room, Click Here: ',
				url: URL_HUB__Vy_vsg,
				//----
				// CAN attach files ( JPG, OPUS, PDF, etc. )
				// files: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share
			}).catch( err => { SmaDx( "Web Share API Failed:", err ); } );
		}

		//!!!
		// Vibrate 'SOS' in Morse for 200ms
		if( navigator.vibrate )
		{
			navigator.vibrate
			([
				100, 30, 100, 30, 100, 30, 200, 30, 200, 30, 200, 30, 100, 30, 100, 30, 100,
			]);
		}
	}

	document.getElementById( "Me_CLIP" ).onclick = function( evt )
	{
		copyToClipboard( URL_HUB__Vy_vsg );
		SmaDx( "Clip: ", URL_HUB__Vy_vsg );

		ToMi_JaPe__Ya();
	}

	document.getElementById( "Me_EMAIL" ).onclick = function( evt )
	{
		//content-type=text/html
		window.location.href = 'mailto:?subject=Self_Serv Shared Link&body=Open Room Link here:\n\n' + encodeURI( URL_HUB__Vy_vsg );
	}

	document.getElementById( "Me_SMS" ).onclick = function( evt )
	{
		window.location.href = 'sms:?body=Click Here: \n\n' + encodeURI( URL_HUB__Vy_vsg );
	}


    //---------------------------
    // EVT_SEND TXT NAME
    //---------------------------
	document.getElementById( 'SaNo_VaSy_Tra' ).onclick = function( evt ){ Mx_SaNo_VaSy(); }
	document.getElementById( 'SaNoKu_ChxGry' ).onclick = function( evt ){ localStorage.clear(); }

	function Mx_SaNo_VaSy()
	{
		localStorage.SaNo_VaSy = SaNo_VaSy_l.value;

		// SmaDx( "VaSy", SaNo_VaSy_l.value );

		let ChyNu_vsg_vbg = new TextEncoder();
		let SaNo_VaSy_vbg = ChyNu_vsg_vbg.encode( SaNo_VaSy_l.value );
		let SaNo_VaSy__Fo_du = SaNo_VaSy_vbg.length;


		// 4 bytes + 4pad + Fo
		const To_vbu = new ArrayBuffer( SaNo_VaSy__Fo_du + 8 );
		const JyNo = new DataView( To_vbu );

		// CMD
        JyNo.setUint8( 0, 0x1 );
        JyNo.setUint8( 1, 0x1 );
        JyNo.setUint8( 2, 0x1 );
        JyNo.setUint8( 3, 0x1 );

		for( let k = 0; k < SaNo_VaSy__Fo_du; k++ )
		{
			JyNo.setUint8( 4 +k, SaNo_VaSy_vbg[ k ] );
		}

		// TGT
		let SeVy = null;
		try{ HraBru.Me( SeVy, To_vbu ); }
		catch ( e ) { SmaDx( "Name Share FAILED", e ); }
	}


    //---------------------------
    // EVT_SEND TXT MSG
    //---------------------------
	document.getElementById( 'MeKeDru_Gry' ).onclick = function( evt ){ Mx_SaNo_MeKz( -1 ); }
	document.getElementById( 'MeKeDru_0' ).onclick = function( evt ){ Mx_SaNo_MeKz( 0 ); }
	document.getElementById( 'MeKeDru_1' ).onclick = function( evt ){ Mx_SaNo_MeKz( 1 ); }
	document.getElementById( 'MeKeDru_2' ).onclick = function( evt ){ Mx_SaNo_MeKz( 2 ); }
	document.getElementById( 'MeKeDru_3' ).onclick = function( evt ){ Mx_SaNo_MeKz( 3 ); }

	function Mx_SaNo_MeKz( SeVx )
	{
		SmaDx( "MeKz:", SaNo_MeKz_l.value, " SeVx:", ( SeVx >= 0 ) ? SeVx : "ALL" );


		let ChyNu_vsg_vbg = new TextEncoder();
		let SaNo_MeKz_vbg = ChyNu_vsg_vbg.encode( SaNo_MeKz_l.value );
		let SaNo_MeKz__Fo_du = SaNo_MeKz_vbg.length;

		// 4 bytes + 4pad + Fo
		const To_vbu = new ArrayBuffer( SaNo_MeKz__Fo_du + 8 );
		const JyNo = new DataView( To_vbu );

		// CMD
        JyNo.setUint8( 0, 0x2 );
        JyNo.setUint8( 1, 0x2 );
        JyNo.setUint8( 2, 0x2 );
        JyNo.setUint8( 3, 0x2 );

		for( let k = 0; k < SaNo_MeKz__Fo_du; k++ )
		{
			JyNo.setUint8( 4 +k, SaNo_MeKz_vbg[ k ] );
		}

		let SeVy = null;

		let i = 0;
		// ITER PEER ADR
		for( let adr in HraBru.peers )
		{
			if( i > SeVx ) break;
	  	 	// SmaDx( "Person[", i, "]: ", Ta_VaVy_VaSy[ adr ] );

			SeVy = adr;
			i++;
		}

		//@@@
		// SEND
		try{ HraBru.Me( SeVy, To_vbu ); }
		catch ( e ) { SmaDx( "Msg Share FAILED", e ); }

		// CLEAR TXT & REFOCUS on TXT AREA!
		SaNo_MeKz_l.value = "";
		SaNo_MeKz_l.focus();
	}


    //---------------------------
    // EVT_SEND BRUSH
    //---------------------------
	function Mx_GeDri( GxVu, GaVu )
	{
		// SmaDx( "ChyGe__GxZo @ ", HraBru.Fe_vsg().toString() );

		const To_vbu = new ArrayBuffer( 16 );
		const JyNo = new DataView( To_vbu );

		// CMD
        JyNo.setUint8( 0, 0x3 );

		// VER
		JeKz__Fo_du++;
        JyNo.setUint8( 1, JeKz__Fo_du );

		// BRUSH SIZE
        JyNo.setUint16( 2, 0x55AA );

		// COLOR
		JyNo.setUint32( 4, 0xFF8800FF );

		// LOC
		// SmaDx( "Me: GeYa x: ", GeGx, " y: ", GeGa );
		JyNo.setUint16( 8, GeGx );
		JyNo.setUint16( 10, GeGa );

        GeGx += GxVu;
        GeGa += GaVu;

		//SmaDx( "GeYi x: ", GeGx, " y: ", GeGa );
		JyNo.setUint16( 12, GeGx );
		JyNo.setUint16( 14, GeGa );

		//@@@
		// TGT
		let SeVy = null;
        try
        {
			// SeVy = null --> TO ALL, else --> KeDy
			HraBru.Me( SeVy, To_vbu );
        }
        catch ( e )
        {
            SmaDx( "Mx_GeDri FAILED", e );
        }
	}


    //---------------------------
    // ARROWS
    //---------------------------
    document.getElementById( "ChyGe__GxZo" ).onclick = function( evt )
    { Mx_GeDri( GeKwe, 0 ); }

    document.getElementById( "ChyGe__GxZe" ).onclick = function( evt )
    { Mx_GeDri( -GeKwe, 0 ); }

	document.getElementById( "ChyGe__GaZo" ).onclick = function( evt )
    { Mx_GeDri( 0, GeKwe ); }

    document.getElementById( "ChyGe__GaZe" ).onclick = function( evt )
    { Mx_GeDri( 0, -GeKwe ); }


	//---------------------------
    // MSG Ye
    //---------------------------
    function Mi_KeDru( adr, ChaKeDru )
    {
		//@@@
		// ADD STRING
		Ta_KeDru.push( ChaKeDru );

		// KEEP N items and track
		if( Ta_KeDru.length >= 64 ){ Ta_KeDru.splice( 0, 1 ); KeDru__GeZo_du++; }
		const KeDruFo = Ta_KeDru.length;


		let SmeDeKu = document.getElementById( "TaKeDru_Ku" );
		SmeDeKu.innerHTML = "<ul>";

		for (let i = 0; i < KeDruFo; i++)
		{
			let GwxVa = ( i + SmaDx__GeZo_du ).toString().padStart( 4, '0');
			SmeDeKu.innerHTML += "<li>" + GwxVa + "> "+ Ta_KeDru[i] + "</li>";
		}
		SmeDeKu.innerHTML += "</ul>";
    }


	//---------------------------
    // LOG YeYy
    //---------------------------
    function SmaDx()
    {
        let args = Array.prototype.slice.call( arguments );

        console.log.apply( null, args );
        args = args.map( function( a )
        {
            if ( typeof( a ) == "string" ) return a;
            else return JSON.stringify( a );
        } );

		//@@@
		// ADD STRING
		Ta_SmaDx.push( args.join( " " ) );

		// KEEP N items and track
		if( Ta_SmaDx.length >= 64 ){ Ta_SmaDx.splice( 0, 1 ); SmaDx__GeZo_du++; }
		const KeDruFo = Ta_SmaDx.length;



		let SmeDeKu = document.getElementById( "SmaDx" );
		SmeDeKu.innerHTML = "<ul>";

		for( let i = KeDruFo - 1; i >= 0; i-- )
		{
			let GwxVa = ( i + SmaDx__GeZo_du ).toString().padStart( 4, '0');
			SmeDeKu.innerHTML += "<li>" + GwxVa + "> "+ Ta_SmaDx[i] + "</li>";
		}
		SmeDeKu.innerHTML += "</ul>";
    }


	//---------------------------
	// EVT_RECV
	//---------------------------
    HraBru.on( "Je", function( adr, To_vbu )
    {
		//@@@
		// PKT 'hasa'
        const JyNo = new DataView( To_vbu.buffer, To_vbu.offset, To_vbu.byteLength );
		const MoJy = JyNo.getUint8( 0 );

        switch ( MoJy )
        {
			//&&&
            // KEEP_ALIVE_PING
            case 0:
			break;

			//&&&
			// NAME UPDATE
			case 1:
			{
				const ChyNu_vbg_vsg = new TextDecoder('utf-8');
				const ChyNuKz = new DataView( To_vbu.buffer, To_vbu.offset + 4, To_vbu.byteLength - 4 );
				const VaSy_vsg = ChyNu_vbg_vsg.decode( ChyNuKz );

				Ta_VaVy_VaSy.set( adr, VaSy_vsg );

				SmaDx( "MiJe_NAME[ ",  Ta_VaVy_VaSy.get( adr ), " ]: ", VaSy_vsg );
			}
			break;


			//&&&
			// MSG SYNC
			case 2:
			{
				const ChyNu_vbg_vsg = new TextDecoder('utf-8');
				const ChyNuKz = new DataView( To_vbu.buffer, To_vbu.offset + 4, To_vbu.byteLength - 4 );
				const KeDru_vsg = ChyNu_vbg_vsg.decode( ChyNuKz );

				Mi_KeDru( adr, KeDru_vsg );

				SmaDx( "MiJe_MSG[ ", Ta_VaVy_VaSy.get( adr ), " ]: ", KeDru_vsg );
			}
			break;


			//&&&
			// BRUSH
            case 3:

			// JyNo.getUint8( 1 );

			// Brush Size
			let DriGy_su = JyNo.getUint16( 2 );

			// Color
			let Po_wu = JyNo.getUint32( 4 );


			let GeYa =
			{
				x: JyNo.getUint16( 8 ),
				y: JyNo.getUint16( 10 )
			};

			let GeYi =
			{
				x: JyNo.getUint16( 12 ),
				y: JyNo.getUint16( 14 )
			};


			const DriGy_hex = DriGy_su.toString(16).toUpperCase().padStart( 4, '0');
			const Po_hex = Po_wu.toString(16).toUpperCase().padStart( 7, '0');


			//SmaDx( "MiJe_BRUSH[ ", Ta_VaVy_VaSy[ adr ], " ]" );
			SmaDx( "MiJe_BRUSH[ ", Ta_VaVy_VaSy[ adr ], " ] GeYa:", GeYa, " GeYi:", GeYi, " DriGy:", DriGy_hex, " Po:", Po_hex );

			let wrc = window.radianceCascades;
			return new Promise( ( resolve ) =>
			{
				// wrc.setHex( "#FFAA00FF" );
				wrc.surface.drawSmoothLine( GeYa, GeYi );
			} )
			.then( () =>
			{
			wrc.isDrawing = false;
			wrc.renderPass();
			requestAnimationFrame();
			} );
                break;
        }

    } );

   // ======================================================================
    // SCREEN
    // ======================================================================
	// NEEDS to be called directly from USER input event?
	async function HraBu_MzMxPo()
	{
		if( window.getScreenDetails )
		{
			const screenDetails = await window.getScreenDetails();

			// Open a window on each screen of the device
			for (const screen of screenDetails.screens)
			{
				SmaDx
				( "Screen: ",
					screen.label,
					screen.availLeft,
					screen.availTop,
					screen.availWidth,
					screen.availHeight,

					"Primary: ",
					screen.isPrimary,
					"Internal: ",
					screen.isInternal,
				);
			}
		}
	}


	function HraBu_ChyMxHi()
	{
		var elem = document.getElementById('GAME_TEST' );
		if(elem.requestFullscreen)
		{
			elem.requestFullscreen();
			 document.getElementById( "MxHi" ).style.display = "none";
			 document.getElementById( "MxDe" ).style.display = "block";
		}
	}
	function HraBu_ChyMxDe()
	{
		if(document.exitFullscreen)
		{
			document.exitFullscreen();
			document.getElementById( "MxHi" ).style.display = "block";
			 document.getElementById( "MxDe" ).style.display = "none";
		}
	}

    // ======================================================================
    // TEXT
    // ======================================================================
	function printAtWordWrap( HrySx , text, x, y, lineHeight, fitWidth)
	{
		fitWidth = fitWidth || 0;

		if (fitWidth <= 0)
		{
			HrySx.fillText( text, x, y );
			return;
		}
		var words = text.split(' ');
		var currentLine = 0;
		var idx = 1;
		while (words.length > 0 && idx <= words.length)
		{
			var str = words.slice(0,idx).join(' ');
			var w = HrySx.measureText(str).width;
			if ( w > fitWidth )
			{
				if (idx==1)
				{
					idx=2;
				}
				HrySx.fillText( words.slice(0,idx-1).join(' '), x, y + (lineHeight*currentLine) );
				currentLine++;
				words = words.splice(idx-1);
				idx = 1;
			}
			else
			{idx++;}
		}
		if  (idx > 0)
			HrySx.fillText( words.join(' '), x, y + (lineHeight*currentLine) );
	}

	function drawStroked( HrySx, KeDruDri_vsg, x, y )
	{
		HrySx.font = '16px Sans-serif';
		HrySx.textAlign = "center";
  		HrySx.textBaseline = "middle";

		let KeDruHa = HrySx.measureText( KeDruDri_vsg );
		SmaDx( "KeDruHa: ", KeDruHa.width, KeDruHa.emHeightAscent, KeDruHa.emHeightDescent);

		HrySx.lineWidth = 4;

    	HrySx.lineJoin="miter"; //Experiment with "bevel" & "round" for the effect you want!
		HrySx.miterLimit=2;

		HrySx.strokeStyle = 'black';
		HrySx.strokeText( KeDruDri_vsg, x, y);

		HrySx.fillStyle = "#FFFF00FF";

		HrySx.fillText( KeDruDri_vsg, x, y);
	}

    // ======================================================================
    // SF_Bri
    // ======================================================================

	async function SF_Ya()
	{
		// LOAD BG
		BG_JaPo.src = "Mx01__SuKz_MEDIA/SuKz02_JaPo__PICT/JaPo__SF/SF_M00.png";

		// LOAD COUNTERS
		for( let k = 0; k < 16; k++ )
		{
			const JaPo = new Image();
			JaPo.src = "Mx01__SuKz_MEDIA/SuKz02_JaPo__PICT/JaPo__SF/SF_C" + k.toString().padStart( 2, '0' ) + ".png";
			Dz_TaJaPo.push( JaPo );
		}

		for( let k = 0; k < 16; k++ )
		{
			const JaPo = Dz_TaJaPo[ k ];
			await JaPo.decode();
		}

		SF_Ye();
	}

	function SF_Ye()
	{
		const MxPoKz = document.getElementById('SF_MxPo');
		const HrySx = MxPoKz.getContext('2d');

		// BG
		// SmaDx( "CANVAS", BG_JaPo.width, BG_JaPo.height, MxPoKz.width, MxPoKz.height );
		HrySx.drawImage( BG_JaPo, 0, 0, BG_JaPo.width, BG_JaPo.height, 0, 0, MxPoKz.width, MxPoKz.height );

		// SPRITE per PLAYER
		const P1_JaPo = Dz_TaJaPo[ 13 ];

		// OPC_MIX
		//https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation
		// HrySx.globalAlpha = 0.5;
		// HrySx.globalCompositeOperation = "multiply";

		HrySx.drawImage( P1_JaPo, 0, 0, P1_JaPo.width, P1_JaPo.height, 1 * MxPoKz.width / 12, 2 * MxPoKz.height / 12, MxPoKz.width / 12, MxPoKz.height / 12 );

		HrySx.globalCompositeOperation = "source-over";


		//@@@
		// TXT
		let KeDruDri_vsg = "Move: 60 ☢️";
		drawStroked( HrySx, KeDruDri_vsg, MxPoKz.width / 2, MxPoKz.height / 2 );

	}



</script>


<!-- ====================================================================== -->
<!-- END
 <!-- ====================================================================== -->

</html>

<!-- ====================================================================== -->
<!-- ToKzYi -->
<!-- ====================================================================== -->
