var Module=typeof Module!="undefined"?Module:{};var ENVIRONMENT_IS_WASM_WORKER=globalThis.name=="em-ww";var ENVIRONMENT_IS_WEB=typeof window=="object";var ENVIRONMENT_IS_WORKER=typeof WorkerGlobalScope!="undefined";var ENVIRONMENT_IS_NODE=typeof process=="object"&&process.versions?.node&&process.type!="renderer";var arguments_=[];var thisProgram="./this.program";var quit_=(status,toThrow)=>{throw toThrow};var _scriptName=typeof document!="undefined"?document.currentScript?.src:undefined;if(ENVIRONMENT_IS_WORKER){_scriptName=self.location.href}var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var readAsync,readBinary;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){try{scriptDirectory=new URL(".",_scriptName).href}catch{}{if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=async url=>{var response=await fetch(url,{credentials:"same-origin"});if(response.ok){return response.arrayBuffer()}throw new Error(response.status+" : "+response.url)}}}else{}var out=console.log.bind(console);var err=console.error.bind(console);var wasmBinary;var wasmModule;var ABORT=false;var EXITSTATUS;function growMemViews(){if(wasmMemory.buffer!=HEAP8.buffer){updateMemoryViews()}}var wwParams;function startWasmWorker(props){wwParams=props;wasmMemory=props.wasmMemory;updateMemoryViews();wasmModule=props.wasm;createWasm();run();props.wasm=props.memMemory=0}if(ENVIRONMENT_IS_WASM_WORKER){onmessage=d=>{onmessage=null;startWasmWorker(d.data)}}var wasmMemory;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;var HEAP64,HEAPU64;var runtimeInitialized=false;function updateMemoryViews(){var b=wasmMemory.buffer;HEAP8=new Int8Array(b);HEAP16=new Int16Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);HEAP32=new Int32Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);Module["HEAPF64"]=HEAPF64=new Float64Array(b);HEAP64=new BigInt64Array(b);Module["HEAPU64"]=HEAPU64=new BigUint64Array(b)}function initMemory(){if(ENVIRONMENT_IS_WASM_WORKER){return}if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{var INITIAL_MEMORY=Module["INITIAL_MEMORY"]||16777216;wasmMemory=new WebAssembly.Memory({initial:BigInt(INITIAL_MEMORY/65536),maximum:BigInt(262144),shared:true,address:"i64"})}updateMemoryViews()}function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(onPreRuns)}function initRuntime(){runtimeInitialized=true;if(ENVIRONMENT_IS_WASM_WORKER)return _wasmWorkerInitializeRuntime();wasmExports["ea"]()}function preMain(){}function postRun(){if(ENVIRONMENT_IS_WASM_WORKER){return}if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(onPostRuns)}function abort(what){Module["onAbort"]?.(what);what="Aborted("+what+")";err(what);ABORT=true;what+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(what);throw e}var wasmBinaryFile;function findWasmBinary(){return locateFile("KoKri__BriDz.wasm")}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw"both async and sync fetching of the wasm failed"}async function getWasmBinary(binaryFile){if(!wasmBinary){try{var response=await readAsync(binaryFile);return new Uint8Array(response)}catch{}}return getBinarySync(binaryFile)}async function instantiateArrayBuffer(binaryFile,imports){try{var binary=await getWasmBinary(binaryFile);var instance=await WebAssembly.instantiate(binary,imports);return instance}catch(reason){err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)}}async function instantiateAsync(binary,binaryFile,imports){if(!binary){try{var response=fetch(binaryFile,{credentials:"same-origin"});var instantiationResult=await WebAssembly.instantiateStreaming(response,imports);return instantiationResult}catch(reason){err(`wasm streaming compile failed: ${reason}`);err("falling back to ArrayBuffer instantiation")}}return instantiateArrayBuffer(binaryFile,imports)}function getWasmImports(){assignWasmImports();return{a:wasmImports}}async function createWasm(){function receiveInstance(instance,module){wasmExports=instance.exports;wasmExports=Asyncify.instrumentWasmExports(wasmExports);wasmExports=applySignatureConversions(wasmExports);wasmTable=wasmExports["ta"];wasmModule=module;assignWasmExports(wasmExports);removeRunDependency("wasm-instantiate");return wasmExports}addRunDependency("wasm-instantiate");function receiveInstantiationResult(result){return receiveInstance(result["instance"],result["module"])}var info=getWasmImports();if(Module["instantiateWasm"]){return new Promise((resolve,reject)=>{Module["instantiateWasm"](info,(mod,inst)=>{resolve(receiveInstance(mod,inst))})})}if(ENVIRONMENT_IS_WASM_WORKER){var instance=new WebAssembly.Instance(wasmModule,getWasmImports());return receiveInstance(instance,wasmModule)}wasmBinaryFile??=findWasmBinary();var result=await instantiateAsync(wasmBinary,wasmBinaryFile,info);var exports=receiveInstantiationResult(result);return exports}class ExitStatus{name="ExitStatus";constructor(status){this.message=`Program terminated with exit(${status})`;this.status=status}}var _wasmWorkerDelayedMessageQueue=[];var handleException=e=>{if(e instanceof ExitStatus||e=="unwind"){return EXITSTATUS}quit_(1,e)};var runtimeKeepaliveCounter=0;var keepRuntimeAlive=()=>noExitRuntime||runtimeKeepaliveCounter>0;var _proc_exit=code=>{EXITSTATUS=code;if(!keepRuntimeAlive()){Module["onExit"]?.(code);ABORT=true}quit_(code,new ExitStatus(code))};var exitJS=(status,implicit)=>{EXITSTATUS=status;_proc_exit(status)};var _exit=exitJS;var maybeExit=()=>{if(!keepRuntimeAlive()){try{_exit(EXITSTATUS)}catch(e){handleException(e)}}};var callUserCallback=func=>{if(ABORT){return}try{func();maybeExit()}catch(e){handleException(e)}};var wasmTable;var getWasmTableEntry=funcPtr=>wasmTable.get(BigInt(funcPtr));var _wasmWorkerRunPostMessage=e=>{let data=e.data;let wasmCall=data["_wsc"];wasmCall&&callUserCallback(()=>getWasmTableEntry(wasmCall)(...data["x"]))};var _wasmWorkerAppendToQueue=e=>{_wasmWorkerDelayedMessageQueue.push(e)};var _wasmWorkerInitializeRuntime=()=>{noExitRuntime=1;__emscripten_wasm_worker_initialize(wwParams.stackLowestAddress,wwParams.stackSize);removeEventListener("message",_wasmWorkerAppendToQueue);_wasmWorkerDelayedMessageQueue=_wasmWorkerDelayedMessageQueue.forEach(_wasmWorkerRunPostMessage);addEventListener("message",_wasmWorkerRunPostMessage)};var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};var onPostRuns=[];var addOnPostRun=cb=>onPostRuns.push(cb);var onPreRuns=[];var addOnPreRun=cb=>onPreRuns.push(cb);var runDependencies=0;var dependenciesFulfilled=null;var removeRunDependency=id=>{runDependencies--;Module["monitorRunDependencies"]?.(runDependencies);if(runDependencies==0){if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}};var addRunDependency=id=>{runDependencies++;Module["monitorRunDependencies"]?.(runDependencies)};var dynCalls={};function getValue(ptr,type="i8"){if(type.endsWith("*"))type="*";switch(type){case"i1":return(growMemViews(),HEAP8)[ptr];case"i8":return(growMemViews(),HEAP8)[ptr];case"i16":return(growMemViews(),HEAP16)[ptr/2];case"i32":return(growMemViews(),HEAP32)[ptr/4];case"i64":return(growMemViews(),HEAP64)[ptr/8];case"float":return(growMemViews(),HEAPF32)[ptr/4];case"double":return(growMemViews(),HEAPF64)[ptr/8];case"*":return Number((growMemViews(),HEAPU64)[ptr/8]);default:abort(`invalid type for getValue: ${type}`)}}var noExitRuntime=true;function setValue(ptr,value,type="i8"){if(type.endsWith("*"))type="*";switch(type){case"i1":(growMemViews(),HEAP8)[ptr]=value;break;case"i8":(growMemViews(),HEAP8)[ptr]=value;break;case"i16":(growMemViews(),HEAP16)[ptr/2]=value;break;case"i32":(growMemViews(),HEAP32)[ptr/4]=value;break;case"i64":(growMemViews(),HEAP64)[ptr/8]=BigInt(value);break;case"float":(growMemViews(),HEAPF32)[ptr/4]=value;break;case"double":(growMemViews(),HEAPF64)[ptr/8]=value;break;case"*":(growMemViews(),HEAPU64)[ptr/8]=BigInt(value);break;default:abort(`invalid type for setValue: ${type}`)}}var __abort_js=()=>abort("");var _wasmWorkers={};var _wasmWorkersID=1;var INT53_MAX=9007199254740992;var INT53_MIN=-9007199254740992;var bigintToI53Checked=num=>num<INT53_MIN||num>INT53_MAX?NaN:Number(num);function __emscripten_create_wasm_worker(stackLowestAddress,stackSize){stackLowestAddress=bigintToI53Checked(stackLowestAddress);let worker;worker=_wasmWorkers[_wasmWorkersID]=new Worker(locateFile("KoKri__BriDz.js"),{name:"em-ww"});worker.postMessage({wwID:_wasmWorkersID,wasm:wasmModule,wasmMemory,stackLowestAddress,stackSize});worker.onmessage=_wasmWorkerRunPostMessage;return _wasmWorkersID++}var __emscripten_runtime_keepalive_clear=()=>{noExitRuntime=false;runtimeKeepaliveCounter=0};var timers={};var _emscripten_get_now=()=>performance.now();var __setitimer_js=(which,timeout_ms)=>{if(timers[which]){clearTimeout(timers[which].id);delete timers[which]}if(!timeout_ms)return 0;var id=setTimeout(()=>{delete timers[which];callUserCallback(()=>__emscripten_timeout(which,_emscripten_get_now()))},timeout_ms);timers[which]={id,timeout_ms};return 0};var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=(growMemViews(),HEAPU8)[sigPtr++]){var wide=ch!=105;buf+=wide&&buf%8?4:0;readEmAsmArgsArray.push(ch==112?Number((growMemViews(),HEAPU64)[buf/8]):ch==106?(growMemViews(),HEAP64)[buf/8]:ch==105?(growMemViews(),HEAP32)[buf/4]:(growMemViews(),HEAPF64)[buf/8]);buf+=wide?8:4}return readEmAsmArgsArray};var runMainThreadEmAsm=(emAsmAddr,sigPtr,argbuf,sync)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[emAsmAddr](...args)};function _emscripten_asm_const_async_on_main_thread(emAsmAddr,sigPtr,argbuf){emAsmAddr=bigintToI53Checked(emAsmAddr);sigPtr=bigintToI53Checked(sigPtr);argbuf=bigintToI53Checked(argbuf);return runMainThreadEmAsm(emAsmAddr,sigPtr,argbuf,0)}var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code](...args)};function _emscripten_asm_const_int(code,sigPtr,argbuf){code=bigintToI53Checked(code);sigPtr=bigintToI53Checked(sigPtr);argbuf=bigintToI53Checked(argbuf);return runEmAsmFunction(code,sigPtr,argbuf)}var _emscripten_set_main_loop_timing=(mode,value)=>{MainLoop.timingMode=mode;MainLoop.timingValue=value;if(!MainLoop.func){return 1}if(!MainLoop.running){MainLoop.running=true}if(mode==0){MainLoop.scheduler=function MainLoop_scheduler_setTimeout(){var timeUntilNextTick=Math.max(0,MainLoop.tickStartTime+value-_emscripten_get_now())|0;setTimeout(MainLoop.runner,timeUntilNextTick)};MainLoop.method="timeout"}else if(mode==1){MainLoop.scheduler=function MainLoop_scheduler_rAF(){MainLoop.requestAnimationFrame(MainLoop.runner)};MainLoop.method="rAF"}else if(mode==2){if(typeof MainLoop.setImmediate=="undefined"){if(typeof setImmediate=="undefined"){var setImmediates=[];var emscriptenMainLoopMessageId="setimmediate";var MainLoop_setImmediate_messageHandler=event=>{if(event.data===emscriptenMainLoopMessageId||event.data.target===emscriptenMainLoopMessageId){event.stopPropagation();setImmediates.shift()()}};addEventListener("message",MainLoop_setImmediate_messageHandler,true);MainLoop.setImmediate=func=>{setImmediates.push(func);if(ENVIRONMENT_IS_WORKER){Module["setImmediates"]??=[];Module["setImmediates"].push(func);postMessage({target:emscriptenMainLoopMessageId})}else postMessage(emscriptenMainLoopMessageId,"*")}}else{MainLoop.setImmediate=setImmediate}}MainLoop.scheduler=function MainLoop_scheduler_setImmediate(){MainLoop.setImmediate(MainLoop.runner)};MainLoop.method="immediate"}return 0};var setMainLoop=(iterFunc,fps,simulateInfiniteLoop,arg,noSetTiming)=>{MainLoop.func=iterFunc;MainLoop.arg=arg;var thisMainLoopId=MainLoop.currentlyRunningMainloop;function checkIsRunning(){if(thisMainLoopId<MainLoop.currentlyRunningMainloop){maybeExit();return false}return true}MainLoop.running=false;MainLoop.runner=function MainLoop_runner(){if(ABORT)return;if(MainLoop.queue.length>0){var start=Date.now();var blocker=MainLoop.queue.shift();blocker.func(blocker.arg);if(MainLoop.remainingBlockers){var remaining=MainLoop.remainingBlockers;var next=remaining%1==0?remaining-1:Math.floor(remaining);if(blocker.counted){MainLoop.remainingBlockers=next}else{next=next+.5;MainLoop.remainingBlockers=(8*remaining+next)/9}}MainLoop.updateStatus();if(!checkIsRunning())return;setTimeout(MainLoop.runner,0);return}if(!checkIsRunning())return;MainLoop.currentFrameNumber=MainLoop.currentFrameNumber+1|0;if(MainLoop.timingMode==1&&MainLoop.timingValue>1&&MainLoop.currentFrameNumber%MainLoop.timingValue!=0){MainLoop.scheduler();return}else if(MainLoop.timingMode==0){MainLoop.tickStartTime=_emscripten_get_now()}MainLoop.runIter(iterFunc);if(!checkIsRunning())return;MainLoop.scheduler()};if(!noSetTiming){if(fps>0){_emscripten_set_main_loop_timing(0,1e3/fps)}else{_emscripten_set_main_loop_timing(1,1)}MainLoop.scheduler()}if(simulateInfiniteLoop){throw"unwind"}};var MainLoop={running:false,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],preMainLoop:[],postMainLoop:[],pause(){MainLoop.scheduler=null;MainLoop.currentlyRunningMainloop++},resume(){MainLoop.currentlyRunningMainloop++;var timingMode=MainLoop.timingMode;var timingValue=MainLoop.timingValue;var func=MainLoop.func;MainLoop.func=null;setMainLoop(func,0,false,MainLoop.arg,true);_emscripten_set_main_loop_timing(timingMode,timingValue);MainLoop.scheduler()},updateStatus(){if(Module["setStatus"]){var message=Module["statusMessage"]||"Please wait...";var remaining=MainLoop.remainingBlockers??0;var expected=MainLoop.expectedBlockers??0;if(remaining){if(remaining<expected){Module["setStatus"](`{message} ({expected - remaining}/{expected})`)}else{Module["setStatus"](message)}}else{Module["setStatus"]("")}}},init(){Module["preMainLoop"]&&MainLoop.preMainLoop.push(Module["preMainLoop"]);Module["postMainLoop"]&&MainLoop.postMainLoop.push(Module["postMainLoop"])},runIter(func){if(ABORT)return;for(var pre of MainLoop.preMainLoop){if(pre()===false){return}}callUserCallback(func);for(var post of MainLoop.postMainLoop){post()}},nextRAF:0,fakeRequestAnimationFrame(func){var now=Date.now();if(MainLoop.nextRAF===0){MainLoop.nextRAF=now+1e3/60}else{while(now+2>=MainLoop.nextRAF){MainLoop.nextRAF+=1e3/60}}var delay=Math.max(MainLoop.nextRAF-now,0);setTimeout(func,delay)},requestAnimationFrame(func){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(func)}else{MainLoop.fakeRequestAnimationFrame(func)}}};var _emscripten_cancel_main_loop=()=>{MainLoop.pause();MainLoop.func=null};var UTF8Decoder=new TextDecoder;var findStringEnd=(heapOrArray,idx,maxBytesToRead,ignoreNul)=>{var maxIdx=idx+maxBytesToRead;if(ignoreNul)return maxIdx;while(heapOrArray[idx]&&!(idx>=maxIdx))++idx;return idx};var UTF8ToString=(ptr,maxBytesToRead,ignoreNul)=>{if(!ptr)return"";var end=findStringEnd((growMemViews(),HEAPU8),ptr,maxBytesToRead,ignoreNul);return UTF8Decoder.decode((growMemViews(),HEAPU8).slice(ptr,end))};function _emscripten_console_log(str){str=bigintToI53Checked(str);console.log(UTF8ToString(str))}var _emscripten_date_now=()=>Date.now();var maybeCStringToJsString=cString=>cString>2?UTF8ToString(cString):cString;var specialHTMLTargets=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];var findEventTarget=target=>{target=maybeCStringToJsString(target);var domElement=specialHTMLTargets[target]||(typeof document!="undefined"?document.querySelector(target):null);return domElement};var findCanvasEventTarget=findEventTarget;function _emscripten_get_canvas_element_size(target,width,height){target=bigintToI53Checked(target);width=bigintToI53Checked(width);height=bigintToI53Checked(height);var canvas=findCanvasEventTarget(target);if(!canvas)return-4;(growMemViews(),HEAP32)[width/4]=canvas.width;(growMemViews(),HEAP32)[height/4]=canvas.height}var JSEvents={memcpy(target,src,size){(growMemViews(),HEAP8).set((growMemViews(),HEAP8).subarray(src,src+size),target)},removeAllEventListeners(){while(JSEvents.eventHandlers.length){JSEvents._removeHandler(JSEvents.eventHandlers.length-1)}JSEvents.deferredCalls=[]},inEventHandler:0,deferredCalls:[],deferCall(targetFunction,precedence,argsList){function arraysHaveEqualContent(arrA,arrB){if(arrA.length!=arrB.length)return false;for(var i in arrA){if(arrA[i]!=arrB[i])return false}return true}for(var call of JSEvents.deferredCalls){if(call.targetFunction==targetFunction&&arraysHaveEqualContent(call.argsList,argsList)){return}}JSEvents.deferredCalls.push({targetFunction,precedence,argsList});JSEvents.deferredCalls.sort((x,y)=>x.precedence<y.precedence)},removeDeferredCalls(targetFunction){JSEvents.deferredCalls=JSEvents.deferredCalls.filter(call=>call.targetFunction!=targetFunction)},canPerformEventHandlerRequests(){if(navigator.userActivation){return navigator.userActivation.isActive}return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls(){if(!JSEvents.canPerformEventHandlerRequests()){return}var deferredCalls=JSEvents.deferredCalls;JSEvents.deferredCalls=[];for(var call of deferredCalls){call.targetFunction(...call.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:(target,eventTypeString)=>{for(var i=0;i<JSEvents.eventHandlers.length;++i){if(JSEvents.eventHandlers[i].target==target&&(!eventTypeString||eventTypeString==JSEvents.eventHandlers[i].eventTypeString)){JSEvents._removeHandler(i--)}}},_removeHandler(i){var h=JSEvents.eventHandlers[i];h.target.removeEventListener(h.eventTypeString,h.eventListenerFunc,h.useCapture);JSEvents.eventHandlers.splice(i,1)},registerOrRemoveHandler(eventHandler){if(!eventHandler.target){return-4}if(eventHandler.callbackfunc){eventHandler.eventListenerFunc=function(event){++JSEvents.inEventHandler;JSEvents.currentEventHandler=eventHandler;JSEvents.runDeferredCalls();eventHandler.handlerFunc(event);JSEvents.runDeferredCalls();--JSEvents.inEventHandler};eventHandler.target.addEventListener(eventHandler.eventTypeString,eventHandler.eventListenerFunc,eventHandler.useCapture);JSEvents.eventHandlers.push(eventHandler)}else{for(var i=0;i<JSEvents.eventHandlers.length;++i){if(JSEvents.eventHandlers[i].target==eventHandler.target&&JSEvents.eventHandlers[i].eventTypeString==eventHandler.eventTypeString){JSEvents._removeHandler(i--)}}}return 0},getNodeNameForTarget(target){if(!target)return"";if(target==window)return"#window";if(target==screen)return"#screen";return target?.nodeName||""},fullscreenEnabled(){return document.fullscreenEnabled}};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.codePointAt(i);if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63;i++}}heap[outIdx]=0;return outIdx-startIdx};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,(growMemViews(),HEAPU8),outPtr,maxBytesToWrite);var fillGamepadEventData=(eventStruct,e)=>{(growMemViews(),HEAPF64)[eventStruct/8]=e.timestamp;for(var i=0;i<e.axes.length;++i){(growMemViews(),HEAPF64)[(eventStruct+i*8+16)/8]=e.axes[i]}for(var i=0;i<e.buttons.length;++i){if(typeof e.buttons[i]=="object"){(growMemViews(),HEAPF64)[(eventStruct+i*8+528)/8]=e.buttons[i].value}else{(growMemViews(),HEAPF64)[(eventStruct+i*8+528)/8]=e.buttons[i]}}for(var i=0;i<e.buttons.length;++i){if(typeof e.buttons[i]=="object"){(growMemViews(),HEAP8)[eventStruct+i+1040]=e.buttons[i].pressed}else{(growMemViews(),HEAP8)[eventStruct+i+1040]=e.buttons[i]==1}}(growMemViews(),HEAP8)[eventStruct+1104]=e.connected;(growMemViews(),HEAP32)[(eventStruct+1108)/4]=e.index;(growMemViews(),HEAP32)[(eventStruct+8)/4]=e.axes.length;(growMemViews(),HEAP32)[(eventStruct+12)/4]=e.buttons.length;stringToUTF8(e.id,eventStruct+1112,64);stringToUTF8(e.mapping,eventStruct+1176,64)};function _emscripten_get_gamepad_status(index,gamepadState){gamepadState=bigintToI53Checked(gamepadState);if(index<0||index>=JSEvents.lastGamepadState.length)return-5;if(!JSEvents.lastGamepadState[index])return-7;fillGamepadEventData(gamepadState,JSEvents.lastGamepadState[index]);return 0}var getHeapMax=()=>17179869184;var _emscripten_get_heap_max=()=>BigInt(getHeapMax());var _emscripten_get_num_gamepads=()=>JSEvents.lastGamepadState.length;function getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.msFullscreenElement}var safeSetTimeout=(func,timeout)=>setTimeout(()=>{callUserCallback(func)},timeout);var warnOnce=text=>{warnOnce.shown||={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;err(text)}};var preloadPlugins=[];var Browser={useWebGL:false,isFullscreen:false,pointerLock:false,moduleContextCreatedCallbacks:[],workers:[],preloadedImages:{},preloadedAudios:{},getCanvas:()=>Module["canvas"],init(){if(Browser.initted)return;Browser.initted=true;var imagePlugin={};imagePlugin["canHandle"]=function imagePlugin_canHandle(name){return!Module["noImageDecoding"]&&/\.(jpg|jpeg|png|bmp|webp)$/i.test(name)};imagePlugin["handle"]=async function imagePlugin_handle(byteArray,name){var b=new Blob([byteArray],{type:Browser.getMimetype(name)});if(b.size!==byteArray.length){b=new Blob([new Uint8Array(byteArray).buffer],{type:Browser.getMimetype(name)})}var url=URL.createObjectURL(b);return new Promise((resolve,reject)=>{var img=new Image;img.onload=()=>{var canvas=document.createElement("canvas");canvas.width=img.width;canvas.height=img.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);Browser.preloadedImages[name]=canvas;URL.revokeObjectURL(url);resolve(byteArray)};img.onerror=event=>{err(`Image ${url} could not be decoded`);reject()};img.src=url})};preloadPlugins.push(imagePlugin);var audioPlugin={};audioPlugin["canHandle"]=function audioPlugin_canHandle(name){return!Module["noAudioDecoding"]&&name.slice(-4)in{".ogg":1,".wav":1,".mp3":1}};audioPlugin["handle"]=async function audioPlugin_handle(byteArray,name){return new Promise((resolve,reject)=>{var done=false;function finish(audio){if(done)return;done=true;Browser.preloadedAudios[name]=audio;resolve(byteArray)}var b=new Blob([byteArray],{type:Browser.getMimetype(name)});var url=URL.createObjectURL(b);var audio=new Audio;audio.addEventListener("canplaythrough",()=>finish(audio),false);audio.onerror=function audio_onerror(event){if(done)return;err(`warning: browser could not fully decode audio ${name}, trying slower base64 approach`);function encode64(data){var BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var PAD="=";var ret="";var leftchar=0;var leftbits=0;for(var i=0;i<data.length;i++){leftchar=leftchar<<8|data[i];leftbits+=8;while(leftbits>=6){var curr=leftchar>>leftbits-6&63;leftbits-=6;ret+=BASE[curr]}}if(leftbits==2){ret+=BASE[(leftchar&3)<<4];ret+=PAD+PAD}else if(leftbits==4){ret+=BASE[(leftchar&15)<<2];ret+=PAD}return ret}audio.src="data:audio/x-"+name.slice(-3)+";base64,"+encode64(byteArray);finish(audio)};audio.src=url;safeSetTimeout(()=>{finish(audio)},1e4)})};preloadPlugins.push(audioPlugin);function pointerLockChange(){var canvas=Browser.getCanvas();Browser.pointerLock=document.pointerLockElement===canvas}var canvas=Browser.getCanvas();if(canvas){document.addEventListener("pointerlockchange",pointerLockChange,false);if(Module["elementPointerLock"]){canvas.addEventListener("click",ev=>{if(!Browser.pointerLock&&Browser.getCanvas().requestPointerLock){Browser.getCanvas().requestPointerLock();ev.preventDefault()}},false)}}},createContext(canvas,useWebGL,setInModule,webGLContextAttributes){if(useWebGL&&Module["ctx"]&&canvas==Browser.getCanvas())return Module["ctx"];var ctx;var contextHandle;if(useWebGL){var contextAttributes={antialias:false,alpha:false,majorVersion:1};if(webGLContextAttributes){for(var attribute in webGLContextAttributes){contextAttributes[attribute]=webGLContextAttributes[attribute]}}if(typeof GL!="undefined"){contextHandle=GL.createContext(canvas,contextAttributes);if(contextHandle){ctx=GL.getContext(contextHandle).GLctx}}}else{ctx=canvas.getContext("2d")}if(!ctx)return null;if(setInModule){Module["ctx"]=ctx;if(useWebGL)GL.makeContextCurrent(contextHandle);Browser.useWebGL=useWebGL;Browser.moduleContextCreatedCallbacks.forEach(callback=>callback());Browser.init()}return ctx},fullscreenHandlersInstalled:false,lockPointer:undefined,resizeCanvas:undefined,requestFullscreen(lockPointer,resizeCanvas){Browser.lockPointer=lockPointer;Browser.resizeCanvas=resizeCanvas;if(typeof Browser.lockPointer=="undefined")Browser.lockPointer=true;if(typeof Browser.resizeCanvas=="undefined")Browser.resizeCanvas=false;var canvas=Browser.getCanvas();function fullscreenChange(){Browser.isFullscreen=false;var canvasContainer=canvas.parentNode;if(getFullscreenElement()===canvasContainer){canvas.exitFullscreen=Browser.exitFullscreen;if(Browser.lockPointer)canvas.requestPointerLock();Browser.isFullscreen=true;if(Browser.resizeCanvas){Browser.setFullscreenCanvasSize()}else{Browser.updateCanvasDimensions(canvas)}}else{canvasContainer.parentNode.insertBefore(canvas,canvasContainer);canvasContainer.parentNode.removeChild(canvasContainer);if(Browser.resizeCanvas){Browser.setWindowedCanvasSize()}else{Browser.updateCanvasDimensions(canvas)}}Module["onFullScreen"]?.(Browser.isFullscreen);Module["onFullscreen"]?.(Browser.isFullscreen)}if(!Browser.fullscreenHandlersInstalled){Browser.fullscreenHandlersInstalled=true;document.addEventListener("fullscreenchange",fullscreenChange,false);document.addEventListener("mozfullscreenchange",fullscreenChange,false);document.addEventListener("webkitfullscreenchange",fullscreenChange,false);document.addEventListener("MSFullscreenChange",fullscreenChange,false)}var canvasContainer=document.createElement("div");canvas.parentNode.insertBefore(canvasContainer,canvas);canvasContainer.appendChild(canvas);canvasContainer.requestFullscreen=canvasContainer["requestFullscreen"]||canvasContainer["mozRequestFullScreen"]||canvasContainer["msRequestFullscreen"]||(canvasContainer["webkitRequestFullscreen"]?()=>canvasContainer["webkitRequestFullscreen"](Element["ALLOW_KEYBOARD_INPUT"]):null)||(canvasContainer["webkitRequestFullScreen"]?()=>canvasContainer["webkitRequestFullScreen"](Element["ALLOW_KEYBOARD_INPUT"]):null);canvasContainer.requestFullscreen()},exitFullscreen(){if(!Browser.isFullscreen){return false}var CFS=document["exitFullscreen"]||document["cancelFullScreen"]||document["mozCancelFullScreen"]||document["msExitFullscreen"]||document["webkitCancelFullScreen"]||(()=>{});CFS.apply(document,[]);return true},safeSetTimeout(func,timeout){return safeSetTimeout(func,timeout)},getMimetype(name){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[name.slice(name.lastIndexOf(".")+1)]},getUserMedia(func){window.getUserMedia||=navigator["getUserMedia"]||navigator["mozGetUserMedia"];window.getUserMedia(func)},getMovementX(event){return event["movementX"]||event["mozMovementX"]||event["webkitMovementX"]||0},getMovementY(event){return event["movementY"]||event["mozMovementY"]||event["webkitMovementY"]||0},getMouseWheelDelta(event){var delta=0;switch(event.type){case"DOMMouseScroll":delta=event.detail/3;break;case"mousewheel":delta=event.wheelDelta/120;break;case"wheel":delta=event.deltaY;switch(event.deltaMode){case 0:delta/=100;break;case 1:delta/=3;break;case 2:delta*=80;break;default:abort("unrecognized mouse wheel delta mode: "+event.deltaMode)}break;default:abort("unrecognized mouse wheel event: "+event.type)}return delta},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(pageX,pageY){var canvas=Browser.getCanvas();var rect=canvas.getBoundingClientRect();var scrollX=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset;var scrollY=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset;var adjustedX=pageX-(scrollX+rect.left);var adjustedY=pageY-(scrollY+rect.top);adjustedX=adjustedX*(canvas.width/rect.width);adjustedY=adjustedY*(canvas.height/rect.height);return{x:adjustedX,y:adjustedY}},setMouseCoords(pageX,pageY){const{x,y}=Browser.calculateMouseCoords(pageX,pageY);Browser.mouseMovementX=x-Browser.mouseX;Browser.mouseMovementY=y-Browser.mouseY;Browser.mouseX=x;Browser.mouseY=y},calculateMouseEvent(event){if(Browser.pointerLock){if(event.type!="mousemove"&&"mozMovementX"in event){Browser.mouseMovementX=Browser.mouseMovementY=0}else{Browser.mouseMovementX=Browser.getMovementX(event);Browser.mouseMovementY=Browser.getMovementY(event)}Browser.mouseX+=Browser.mouseMovementX;Browser.mouseY+=Browser.mouseMovementY}else{if(event.type==="touchstart"||event.type==="touchend"||event.type==="touchmove"){var touch=event.touch;if(touch===undefined){return}var coords=Browser.calculateMouseCoords(touch.pageX,touch.pageY);if(event.type==="touchstart"){Browser.lastTouches[touch.identifier]=coords;Browser.touches[touch.identifier]=coords}else if(event.type==="touchend"||event.type==="touchmove"){var last=Browser.touches[touch.identifier];last||=coords;Browser.lastTouches[touch.identifier]=last;Browser.touches[touch.identifier]=coords}return}Browser.setMouseCoords(event.pageX,event.pageY)}},resizeListeners:[],updateResizeListeners(){var canvas=Browser.getCanvas();Browser.resizeListeners.forEach(listener=>listener(canvas.width,canvas.height))},setCanvasSize(width,height,noUpdates){var canvas=Browser.getCanvas();Browser.updateCanvasDimensions(canvas,width,height);if(!noUpdates)Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL!="undefined"){var flags=(growMemViews(),HEAPU32)[SDL.screen/4];flags=flags|8388608;(growMemViews(),HEAP32)[SDL.screen/4]=flags}Browser.updateCanvasDimensions(Browser.getCanvas());Browser.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL!="undefined"){var flags=(growMemViews(),HEAPU32)[SDL.screen/4];flags=flags&~8388608;(growMemViews(),HEAP32)[SDL.screen/4]=flags}Browser.updateCanvasDimensions(Browser.getCanvas());Browser.updateResizeListeners()},updateCanvasDimensions(canvas,wNative,hNative){if(wNative&&hNative){canvas.widthNative=wNative;canvas.heightNative=hNative}else{wNative=canvas.widthNative;hNative=canvas.heightNative}var w=wNative;var h=hNative;if(Module["forcedAspectRatio"]>0){if(w/h<Module["forcedAspectRatio"]){w=Math.round(h*Module["forcedAspectRatio"])}else{h=Math.round(w/Module["forcedAspectRatio"])}}if(getFullscreenElement()===canvas.parentNode&&typeof screen!="undefined"){var factor=Math.min(screen.width/w,screen.height/h);w=Math.round(w*factor);h=Math.round(h*factor)}if(Browser.resizeCanvas){if(canvas.width!=w)canvas.width=w;if(canvas.height!=h)canvas.height=h;if(typeof canvas.style!="undefined"){canvas.style.removeProperty("width");canvas.style.removeProperty("height")}}else{if(canvas.width!=wNative)canvas.width=wNative;if(canvas.height!=hNative)canvas.height=hNative;if(typeof canvas.style!="undefined"){if(w!=wNative||h!=hNative){canvas.style.setProperty("width",w+"px","important");canvas.style.setProperty("height",h+"px","important")}else{canvas.style.removeProperty("width");canvas.style.removeProperty("height")}}}}};function _emscripten_get_screen_size(width,height){width=bigintToI53Checked(width);height=bigintToI53Checked(height);(growMemViews(),HEAP32)[width/4]=screen.width;(growMemViews(),HEAP32)[height/4]=screen.height}var _emscripten_html5_remove_all_event_listeners=()=>JSEvents.removeAllEventListeners();var _emscripten_performance_now=()=>performance.now();var alignMemory=(size,alignment)=>Math.ceil(size/alignment)*alignment;var growMemory=size=>{var oldHeapSize=wasmMemory.buffer.byteLength;var pages=(size-oldHeapSize+65535)/65536|0;try{wasmMemory.grow(BigInt(pages));updateMemoryViews();return 1}catch(e){}};function _emscripten_resize_heap(requestedSize){requestedSize=bigintToI53Checked(requestedSize);var oldSize=(growMemViews(),HEAPU8).length;if(requestedSize<=oldSize){return false}var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignMemory(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false}function _emscripten_run_script(ptr){ptr=bigintToI53Checked(ptr);eval(UTF8ToString(ptr))}var _emscripten_sample_gamepad_data=()=>{try{if(navigator.getGamepads)return(JSEvents.lastGamepadState=navigator.getGamepads())?0:-1}catch(e){navigator.getGamepads=null}return-1};var fillBatteryEventData=(eventStruct,battery)=>{(growMemViews(),HEAPF64)[eventStruct/8]=battery.chargingTime;(growMemViews(),HEAPF64)[(eventStruct+8)/8]=battery.dischargingTime;(growMemViews(),HEAPF64)[(eventStruct+16)/8]=battery.level;(growMemViews(),HEAP8)[eventStruct+24]=battery.charging};var registerBatteryEventCallback=(battery,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.batteryEvent||=_malloc(32);var batteryEventHandlerFunc=(e=event)=>{var batteryEvent=JSEvents.batteryEvent;fillBatteryEventData(batteryEvent,battery);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,batteryEvent,userData))e.preventDefault()};var eventHandler={target:battery,eventTypeString,callbackfunc,handlerFunc:batteryEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};var hasBatteryAPI=()=>typeof navigator!="undefined"&&navigator.getBattery;var _emscripten_set_batterychargingchange_callback_on_thread=function(userData,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!hasBatteryAPI())return-1;navigator.getBattery().then(b=>{registerBatteryEventCallback(b,userData,true,callbackfunc,29,"chargingchange",targetThread)})};var _emscripten_set_batterylevelchange_callback_on_thread=function(userData,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!hasBatteryAPI())return-1;navigator.getBattery().then(b=>{registerBatteryEventCallback(b,userData,true,callbackfunc,30,"levelchange",targetThread)})};var registerBeforeUnloadEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString)=>{var beforeUnloadEventHandlerFunc=(e=event)=>{var confirmationMessage=((a1,a2,a3)=>dynCall_jijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,0,userData);if(confirmationMessage){confirmationMessage=UTF8ToString(confirmationMessage)}if(confirmationMessage){e.preventDefault();e.returnValue=confirmationMessage;return confirmationMessage}};var eventHandler={target:findEventTarget(target),eventTypeString,callbackfunc,handlerFunc:beforeUnloadEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_beforeunload_callback_on_thread(userData,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(typeof onbeforeunload=="undefined")return-1;if(targetThread!==1)return-5;return registerBeforeUnloadEventCallback(2,userData,true,callbackfunc,28,"beforeunload")}var registerFocusEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.focusEvent||=_malloc(256);var focusEventHandlerFunc=(e=event)=>{var nodeName=JSEvents.getNodeNameForTarget(e.target);var id=e.target.id?e.target.id:"";var focusEvent=JSEvents.focusEvent;stringToUTF8(nodeName,focusEvent+0,128);stringToUTF8(id,focusEvent+128,128);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,focusEvent,userData))e.preventDefault()};var eventHandler={target:findEventTarget(target),eventTypeString,callbackfunc,handlerFunc:focusEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_blur_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerFocusEventCallback(target,userData,useCapture,callbackfunc,12,"blur",targetThread)}var getBoundingClientRect=e=>specialHTMLTargets.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0};var fillMouseEventData=(eventStruct,e,target)=>{(growMemViews(),HEAPF64)[eventStruct/8]=e.timeStamp;var idx=eventStruct/4;(growMemViews(),HEAP32)[idx+2]=e.screenX;(growMemViews(),HEAP32)[idx+3]=e.screenY;(growMemViews(),HEAP32)[idx+4]=e.clientX;(growMemViews(),HEAP32)[idx+5]=e.clientY;(growMemViews(),HEAP8)[eventStruct+24]=e.ctrlKey;(growMemViews(),HEAP8)[eventStruct+25]=e.shiftKey;(growMemViews(),HEAP8)[eventStruct+26]=e.altKey;(growMemViews(),HEAP8)[eventStruct+27]=e.metaKey;(growMemViews(),HEAP16)[idx*2+14]=e.button;(growMemViews(),HEAP16)[idx*2+15]=e.buttons;(growMemViews(),HEAP32)[idx+8]=e["movementX"];(growMemViews(),HEAP32)[idx+9]=e["movementY"];var rect=getBoundingClientRect(target);(growMemViews(),HEAP32)[idx+10]=e.clientX-(rect.left|0);(growMemViews(),HEAP32)[idx+11]=e.clientY-(rect.top|0)};var registerMouseEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.mouseEvent||=_malloc(64);target=findEventTarget(target);var mouseEventHandlerFunc=(e=event)=>{fillMouseEventData(JSEvents.mouseEvent,e,target);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,JSEvents.mouseEvent,userData))e.preventDefault()};var eventHandler={target,allowsDeferredCalls:eventTypeString!="mousemove"&&eventTypeString!="mouseenter"&&eventTypeString!="mouseleave",eventTypeString,callbackfunc,handlerFunc:mouseEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_click_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,4,"click",targetThread)}function _emscripten_set_dblclick_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,7,"dblclick",targetThread)}var fillDeviceMotionEventData=(eventStruct,e,target)=>{var supportedFields=0;var a=e["acceleration"];supportedFields|=a&&1;var ag=e["accelerationIncludingGravity"];supportedFields|=ag&&2;var rr=e["rotationRate"];supportedFields|=rr&&4;a=a||{};ag=ag||{};rr=rr||{};(growMemViews(),HEAPF64)[eventStruct/8]=a["x"];(growMemViews(),HEAPF64)[(eventStruct+8)/8]=a["y"];(growMemViews(),HEAPF64)[(eventStruct+16)/8]=a["z"];(growMemViews(),HEAPF64)[(eventStruct+24)/8]=ag["x"];(growMemViews(),HEAPF64)[(eventStruct+32)/8]=ag["y"];(growMemViews(),HEAPF64)[(eventStruct+40)/8]=ag["z"];(growMemViews(),HEAPF64)[(eventStruct+48)/8]=rr["alpha"];(growMemViews(),HEAPF64)[(eventStruct+56)/8]=rr["beta"];(growMemViews(),HEAPF64)[(eventStruct+64)/8]=rr["gamma"]};var registerDeviceMotionEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.deviceMotionEvent||=_malloc(80);var deviceMotionEventHandlerFunc=(e=event)=>{fillDeviceMotionEventData(JSEvents.deviceMotionEvent,e,target);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,JSEvents.deviceMotionEvent,userData))e.preventDefault()};var eventHandler={target:findEventTarget(target),eventTypeString,callbackfunc,handlerFunc:deviceMotionEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_devicemotion_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerDeviceMotionEventCallback(2,userData,useCapture,callbackfunc,17,"devicemotion",targetThread)}var fillDeviceOrientationEventData=(eventStruct,e,target)=>{(growMemViews(),HEAPF64)[eventStruct/8]=e.alpha;(growMemViews(),HEAPF64)[(eventStruct+8)/8]=e.beta;(growMemViews(),HEAPF64)[(eventStruct+16)/8]=e.gamma;(growMemViews(),HEAP8)[eventStruct+24]=e.absolute};var registerDeviceOrientationEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.deviceOrientationEvent||=_malloc(32);var deviceOrientationEventHandlerFunc=(e=event)=>{fillDeviceOrientationEventData(JSEvents.deviceOrientationEvent,e,target);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,JSEvents.deviceOrientationEvent,userData))e.preventDefault()};var eventHandler={target:findEventTarget(target),eventTypeString,callbackfunc,handlerFunc:deviceOrientationEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_deviceorientation_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerDeviceOrientationEventCallback(2,userData,useCapture,callbackfunc,16,"deviceorientation",targetThread)}function _emscripten_set_focus_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerFocusEventCallback(target,userData,useCapture,callbackfunc,13,"focus",targetThread)}function _emscripten_set_focusin_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerFocusEventCallback(target,userData,useCapture,callbackfunc,14,"focusin",targetThread)}function _emscripten_set_focusout_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerFocusEventCallback(target,userData,useCapture,callbackfunc,15,"focusout",targetThread)}var fillFullscreenChangeEventData=eventStruct=>{var fullscreenElement=getFullscreenElement();var isFullscreen=!!fullscreenElement;(growMemViews(),HEAP8)[eventStruct]=isFullscreen;(growMemViews(),HEAP8)[eventStruct+1]=JSEvents.fullscreenEnabled();var reportedElement=isFullscreen?fullscreenElement:JSEvents.previousFullscreenElement;var nodeName=JSEvents.getNodeNameForTarget(reportedElement);var id=reportedElement?.id||"";stringToUTF8(nodeName,eventStruct+2,128);stringToUTF8(id,eventStruct+130,128);(growMemViews(),HEAP32)[(eventStruct+260)/4]=reportedElement?reportedElement.clientWidth:0;(growMemViews(),HEAP32)[(eventStruct+264)/4]=reportedElement?reportedElement.clientHeight:0;(growMemViews(),HEAP32)[(eventStruct+268)/4]=screen.width;(growMemViews(),HEAP32)[(eventStruct+272)/4]=screen.height;if(isFullscreen){JSEvents.previousFullscreenElement=fullscreenElement}};var registerFullscreenChangeEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.fullscreenChangeEvent||=_malloc(276);var fullscreenChangeEventhandlerFunc=(e=event)=>{var fullscreenChangeEvent=JSEvents.fullscreenChangeEvent;fillFullscreenChangeEventData(fullscreenChangeEvent);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,fullscreenChangeEvent,userData))e.preventDefault()};var eventHandler={target,eventTypeString,callbackfunc,handlerFunc:fullscreenChangeEventhandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_fullscreenchange_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!JSEvents.fullscreenEnabled())return-1;target=findEventTarget(target);if(!target)return-4;return registerFullscreenChangeEventCallback(target,userData,useCapture,callbackfunc,19,"fullscreenchange",targetThread)}var registerGamepadEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.gamepadEvent||=_malloc(1240);var gamepadEventHandlerFunc=(e=event)=>{var gamepadEvent=JSEvents.gamepadEvent;fillGamepadEventData(gamepadEvent,e["gamepad"]);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,gamepadEvent,userData))e.preventDefault()};var eventHandler={target:findEventTarget(target),allowsDeferredCalls:true,eventTypeString,callbackfunc,handlerFunc:gamepadEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_gamepadconnected_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(_emscripten_sample_gamepad_data())return-1;return registerGamepadEventCallback(2,userData,useCapture,callbackfunc,26,"gamepadconnected",targetThread)}function _emscripten_set_gamepaddisconnected_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(_emscripten_sample_gamepad_data())return-1;return registerGamepadEventCallback(2,userData,useCapture,callbackfunc,27,"gamepaddisconnected",targetThread)}var registerKeyEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.keyEvent||=_malloc(160);var keyEventHandlerFunc=e=>{var keyEventData=JSEvents.keyEvent;(growMemViews(),HEAPF64)[keyEventData/8]=e.timeStamp;var idx=keyEventData/4;(growMemViews(),HEAP32)[idx+2]=e.location;(growMemViews(),HEAP8)[keyEventData+12]=e.ctrlKey;(growMemViews(),HEAP8)[keyEventData+13]=e.shiftKey;(growMemViews(),HEAP8)[keyEventData+14]=e.altKey;(growMemViews(),HEAP8)[keyEventData+15]=e.metaKey;(growMemViews(),HEAP8)[keyEventData+16]=e.repeat;(growMemViews(),HEAP32)[idx+5]=e.charCode;(growMemViews(),HEAP32)[idx+6]=e.keyCode;(growMemViews(),HEAP32)[idx+7]=e.which;stringToUTF8(e.key||"",keyEventData+32,32);stringToUTF8(e.code||"",keyEventData+64,32);stringToUTF8(e.char||"",keyEventData+96,32);stringToUTF8(e.locale||"",keyEventData+128,32);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,keyEventData,userData))e.preventDefault()};var eventHandler={target:findEventTarget(target),eventTypeString,callbackfunc,handlerFunc:keyEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_keydown_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerKeyEventCallback(target,userData,useCapture,callbackfunc,2,"keydown",targetThread)}function _emscripten_set_keyup_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerKeyEventCallback(target,userData,useCapture,callbackfunc,3,"keyup",targetThread)}function _emscripten_set_mousedown_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,5,"mousedown",targetThread)}function _emscripten_set_mouseenter_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,33,"mouseenter",targetThread)}function _emscripten_set_mouseleave_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,34,"mouseleave",targetThread)}function _emscripten_set_mousemove_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,8,"mousemove",targetThread)}function _emscripten_set_mouseout_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,36,"mouseout",targetThread)}function _emscripten_set_mouseover_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,35,"mouseover",targetThread)}function _emscripten_set_mouseup_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerMouseEventCallback(target,userData,useCapture,callbackfunc,6,"mouseup",targetThread)}var screenOrientation=()=>{if(!window.screen)return undefined;return screen.orientation||screen["mozOrientation"]||screen["webkitOrientation"]};var fillOrientationChangeEventData=eventStruct=>{var orientationsType1=["portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];var orientationsType2=["portrait","portrait","landscape","landscape"];var orientationIndex=0;var orientationAngle=0;var screenOrientObj=screenOrientation();if(typeof screenOrientObj==="object"){orientationIndex=orientationsType1.indexOf(screenOrientObj.type);if(orientationIndex<0){orientationIndex=orientationsType2.indexOf(screenOrientObj.type)}if(orientationIndex>=0){orientationIndex=1<<orientationIndex}orientationAngle=screenOrientObj.angle}(growMemViews(),HEAP32)[eventStruct/4]=orientationIndex;(growMemViews(),HEAP32)[(eventStruct+4)/4]=orientationAngle};var registerOrientationChangeEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.orientationChangeEvent||=_malloc(8);var orientationChangeEventHandlerFunc=(e=event)=>{var orientationChangeEvent=JSEvents.orientationChangeEvent;fillOrientationChangeEventData(orientationChangeEvent);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,orientationChangeEvent,userData))e.preventDefault()};var eventHandler={target,eventTypeString,callbackfunc,handlerFunc:orientationChangeEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_orientationchange_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!window.screen||!screen.orientation)return-1;return registerOrientationChangeEventCallback(screen.orientation,userData,useCapture,callbackfunc,18,"change",targetThread)}var fillPointerlockChangeEventData=eventStruct=>{var pointerLockElement=document.pointerLockElement;var isPointerlocked=!!pointerLockElement;(growMemViews(),HEAP8)[eventStruct]=isPointerlocked;var nodeName=JSEvents.getNodeNameForTarget(pointerLockElement);var id=pointerLockElement?.id||"";stringToUTF8(nodeName,eventStruct+1,128);stringToUTF8(id,eventStruct+129,128)};var registerPointerlockChangeEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.pointerlockChangeEvent||=_malloc(257);var pointerlockChangeEventHandlerFunc=(e=event)=>{var pointerlockChangeEvent=JSEvents.pointerlockChangeEvent;fillPointerlockChangeEventData(pointerlockChangeEvent);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,pointerlockChangeEvent,userData))e.preventDefault()};var eventHandler={target,eventTypeString,callbackfunc,handlerFunc:pointerlockChangeEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_pointerlockchange_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!document.body?.requestPointerLock){return-1}target=findEventTarget(target);if(!target)return-4;return registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,20,"pointerlockchange",targetThread)}var registerUiEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.uiEvent||=_malloc(36);target=findEventTarget(target);var uiEventHandlerFunc=(e=event)=>{if(e.target!=target){return}var b=document.body;if(!b){return}var uiEvent=JSEvents.uiEvent;(growMemViews(),HEAP32)[uiEvent/4]=0;(growMemViews(),HEAP32)[(uiEvent+4)/4]=b.clientWidth;(growMemViews(),HEAP32)[(uiEvent+8)/4]=b.clientHeight;(growMemViews(),HEAP32)[(uiEvent+12)/4]=innerWidth;(growMemViews(),HEAP32)[(uiEvent+16)/4]=innerHeight;(growMemViews(),HEAP32)[(uiEvent+20)/4]=outerWidth;(growMemViews(),HEAP32)[(uiEvent+24)/4]=outerHeight;(growMemViews(),HEAP32)[(uiEvent+28)/4]=pageXOffset|0;(growMemViews(),HEAP32)[(uiEvent+32)/4]=pageYOffset|0;if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,uiEvent,userData))e.preventDefault()};var eventHandler={target,eventTypeString,callbackfunc,handlerFunc:uiEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_resize_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerUiEventCallback(target,userData,useCapture,callbackfunc,10,"resize",targetThread)}function _emscripten_set_scroll_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerUiEventCallback(target,userData,useCapture,callbackfunc,11,"scroll",targetThread)}var registerTouchEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.touchEvent||=_malloc(1552);target=findEventTarget(target);var touchEventHandlerFunc=e=>{var t,touches={},et=e.touches;for(let t of et){t.isChanged=t.onTarget=0;touches[t.identifier]=t}for(let t of e.changedTouches){t.isChanged=1;touches[t.identifier]=t}for(let t of e.targetTouches){touches[t.identifier].onTarget=1}var touchEvent=JSEvents.touchEvent;(growMemViews(),HEAPF64)[touchEvent/8]=e.timeStamp;(growMemViews(),HEAP8)[touchEvent+12]=e.ctrlKey;(growMemViews(),HEAP8)[touchEvent+13]=e.shiftKey;(growMemViews(),HEAP8)[touchEvent+14]=e.altKey;(growMemViews(),HEAP8)[touchEvent+15]=e.metaKey;var idx=touchEvent+16;var targetRect=getBoundingClientRect(target);var numTouches=0;for(let t of Object.values(touches)){var idx32=idx/4;(growMemViews(),HEAP32)[idx32+0]=t.identifier;(growMemViews(),HEAP32)[idx32+1]=t.screenX;(growMemViews(),HEAP32)[idx32+2]=t.screenY;(growMemViews(),HEAP32)[idx32+3]=t.clientX;(growMemViews(),HEAP32)[idx32+4]=t.clientY;(growMemViews(),HEAP32)[idx32+5]=t.pageX;(growMemViews(),HEAP32)[idx32+6]=t.pageY;(growMemViews(),HEAP8)[idx+28]=t.isChanged;(growMemViews(),HEAP8)[idx+29]=t.onTarget;(growMemViews(),HEAP32)[idx32+8]=t.clientX-(targetRect.left|0);(growMemViews(),HEAP32)[idx32+9]=t.clientY-(targetRect.top|0);idx+=48;if(++numTouches>31){break}}(growMemViews(),HEAP32)[(touchEvent+8)/4]=numTouches;if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,touchEvent,userData))e.preventDefault()};var eventHandler={target,allowsDeferredCalls:eventTypeString=="touchstart"||eventTypeString=="touchend",eventTypeString,callbackfunc,handlerFunc:touchEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_touchcancel_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerTouchEventCallback(target,userData,useCapture,callbackfunc,25,"touchcancel",targetThread)}function _emscripten_set_touchend_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerTouchEventCallback(target,userData,useCapture,callbackfunc,23,"touchend",targetThread)}function _emscripten_set_touchmove_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerTouchEventCallback(target,userData,useCapture,callbackfunc,24,"touchmove",targetThread)}function _emscripten_set_touchstart_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);return registerTouchEventCallback(target,userData,useCapture,callbackfunc,22,"touchstart",targetThread)}var fillVisibilityChangeEventData=eventStruct=>{var visibilityStates=["hidden","visible","prerender","unloaded"];var visibilityState=visibilityStates.indexOf(document.visibilityState);(growMemViews(),HEAP8)[eventStruct]=document.hidden;(growMemViews(),HEAP32)[(eventStruct+4)/4]=visibilityState};var registerVisibilityChangeEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.visibilityChangeEvent||=_malloc(8);var visibilityChangeEventHandlerFunc=(e=event)=>{var visibilityChangeEvent=JSEvents.visibilityChangeEvent;fillVisibilityChangeEventData(visibilityChangeEvent);if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,visibilityChangeEvent,userData))e.preventDefault()};var eventHandler={target,eventTypeString,callbackfunc,handlerFunc:visibilityChangeEventHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_visibilitychange_callback_on_thread(userData,useCapture,callbackfunc,targetThread){userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);if(!specialHTMLTargets[1]){return-4}return registerVisibilityChangeEventCallback(specialHTMLTargets[1],userData,useCapture,callbackfunc,21,"visibilitychange",targetThread)}var registerWheelEventCallback=(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread)=>{JSEvents.wheelEvent||=_malloc(96);var wheelHandlerFunc=(e=event)=>{var wheelEvent=JSEvents.wheelEvent;fillMouseEventData(wheelEvent,e,target);(growMemViews(),HEAPF64)[(wheelEvent+64)/8]=e["deltaX"];(growMemViews(),HEAPF64)[(wheelEvent+72)/8]=e["deltaY"];(growMemViews(),HEAPF64)[(wheelEvent+80)/8]=e["deltaZ"];(growMemViews(),HEAP32)[(wheelEvent+88)/4]=e["deltaMode"];if(((a1,a2,a3)=>dynCall_iijj(callbackfunc,a1,BigInt(a2),BigInt(a3)))(eventTypeId,wheelEvent,userData))e.preventDefault()};var eventHandler={target,allowsDeferredCalls:true,eventTypeString,callbackfunc,handlerFunc:wheelHandlerFunc,useCapture};return JSEvents.registerOrRemoveHandler(eventHandler)};function _emscripten_set_wheel_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){target=bigintToI53Checked(target);userData=bigintToI53Checked(userData);callbackfunc=bigintToI53Checked(callbackfunc);targetThread=bigintToI53Checked(targetThread);target=findEventTarget(target);if(!target)return-4;if(typeof target.onwheel!="undefined"){return registerWheelEventCallback(target,userData,useCapture,callbackfunc,9,"wheel",targetThread)}else{return-1}}function _emscripten_set_window_title(title){title=bigintToI53Checked(title);return document.title=UTF8ToString(title)}var _emscripten_terminate_all_wasm_workers=()=>{Object.values(_wasmWorkers).forEach(worker=>worker.terminate());_wasmWorkers={}};function _emscripten_wasm_worker_post_function_v(id,funcPtr){funcPtr=bigintToI53Checked(funcPtr);_wasmWorkers[id].postMessage({_wsc:funcPtr,x:[]})}var _emscripten_wasm_worker_self_id=()=>wwParams?.wwID;var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stackAlloc=sz=>__emscripten_stack_alloc(sz);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var runAndAbortIfError=func=>{try{return func()}catch(e){abort(e)}};var runtimeKeepalivePush=()=>{runtimeKeepaliveCounter+=1};var runtimeKeepalivePop=()=>{runtimeKeepaliveCounter-=1};var Asyncify={rewindArguments:new Map,instrumentWasmImports(imports){var importPattern=/^(invoke_.*|__asyncjs__.*)$/;for(let[x,original]of Object.entries(imports)){if(typeof original=="function"){let isAsyncifyImport=original.isAsync||importPattern.test(x)}}},saveRewindArguments(func,passedArguments){return Asyncify.rewindArguments.set(func,Array.from(passedArguments))},restoreRewindArguments(func){return Asyncify.rewindArguments.get(func)},instrumentFunction(original){var wrapper=(...args)=>{Asyncify.exportCallStack.push(original);try{Asyncify.saveRewindArguments(original,args);return original(...args)}finally{if(!ABORT){var top=Asyncify.exportCallStack.pop();Asyncify.maybeStopUnwind()}}};Asyncify.funcWrappers.set(original,wrapper);return wrapper},instrumentWasmExports(exports){var ret={};for(let[x,original]of Object.entries(exports)){if(typeof original=="function"){var wrapper=Asyncify.instrumentFunction(original);ret[x]=wrapper}else{ret[x]=original}}return ret},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callstackFuncToId:new Map,callStackIdToFunc:new Map,funcWrappers:new Map,callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId(func){if(!Asyncify.callstackFuncToId.has(func)){var id=Asyncify.callStackId++;Asyncify.callstackFuncToId.set(func,id);Asyncify.callStackIdToFunc.set(id,func)}return Asyncify.callstackFuncToId.get(func)},maybeStopUnwind(){if(Asyncify.currData&&Asyncify.state===Asyncify.State.Unwinding&&Asyncify.exportCallStack.length===0){Asyncify.state=Asyncify.State.Normal;runAndAbortIfError(_asyncify_stop_unwind);if(typeof Fibers!="undefined"){Fibers.trampoline()}}},whenDone(){return new Promise((resolve,reject)=>{Asyncify.asyncPromiseHandlers={resolve,reject}})},allocateData(){var ptr=_malloc(24+Asyncify.StackSize);Asyncify.setDataHeader(ptr,ptr+24,Asyncify.StackSize);Asyncify.setDataRewindFunc(ptr);return ptr},setDataHeader(ptr,stack,stackSize){(growMemViews(),HEAPU64)[ptr/8]=BigInt(stack);(growMemViews(),HEAPU64)[(ptr+8)/8]=BigInt(stack+stackSize)},setDataRewindFunc(ptr){var bottomOfCallStack=Asyncify.exportCallStack[0];var rewindId=Asyncify.getCallStackId(bottomOfCallStack);(growMemViews(),HEAP32)[(ptr+16)/4]=rewindId},getDataRewindFunc(ptr){var id=(growMemViews(),HEAP32)[(ptr+16)/4];var func=Asyncify.callStackIdToFunc.get(id);return func},doRewind(ptr){var original=Asyncify.getDataRewindFunc(ptr);var func=Asyncify.funcWrappers.get(original);return func(...Asyncify.restoreRewindArguments(original))},handleSleep(startAsync){if(ABORT)return;if(Asyncify.state===Asyncify.State.Normal){var reachedCallback=false;var reachedAfterCallback=false;startAsync((handleSleepReturnValue=0)=>{if(ABORT)return;Asyncify.handleSleepReturnValue=handleSleepReturnValue;reachedCallback=true;if(!reachedAfterCallback){return}Asyncify.state=Asyncify.State.Rewinding;runAndAbortIfError(()=>_asyncify_start_rewind(Asyncify.currData));if(typeof MainLoop!="undefined"&&MainLoop.func){MainLoop.resume()}var asyncWasmReturnValue,isError=false;try{asyncWasmReturnValue=Asyncify.doRewind(Asyncify.currData)}catch(err){asyncWasmReturnValue=err;isError=true}var handled=false;if(!Asyncify.currData){var asyncPromiseHandlers=Asyncify.asyncPromiseHandlers;if(asyncPromiseHandlers){Asyncify.asyncPromiseHandlers=null;(isError?asyncPromiseHandlers.reject:asyncPromiseHandlers.resolve)(asyncWasmReturnValue);handled=true}}if(isError&&!handled){throw asyncWasmReturnValue}});reachedAfterCallback=true;if(!reachedCallback){Asyncify.state=Asyncify.State.Unwinding;Asyncify.currData=Asyncify.allocateData();if(typeof MainLoop!="undefined"&&MainLoop.func){MainLoop.pause()}runAndAbortIfError(()=>_asyncify_start_unwind(Asyncify.currData))}}else if(Asyncify.state===Asyncify.State.Rewinding){Asyncify.state=Asyncify.State.Normal;runAndAbortIfError(_asyncify_stop_rewind);_free(Asyncify.currData);Asyncify.currData=null;Asyncify.sleepCallbacks.forEach(callUserCallback)}else{abort(`invalid state: ${Asyncify.state}`)}return Asyncify.handleSleepReturnValue},handleAsync:startAsync=>Asyncify.handleSleep(wakeUp=>{startAsync().then(wakeUp)})};var getCFunc=ident=>{var func=Module["_"+ident];return func};var writeArrayToMemory=(array,buffer)=>{(growMemViews(),HEAP8).set(array,buffer)};var stackSave=()=>_emscripten_stack_get_current();var stackRestore=val=>__emscripten_stack_restore(val);var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={pointer:p=>BigInt(p),string:str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return BigInt(ret)},array:arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return BigInt(ret)}};function convertReturnValue(ret){if(returnType==="string"){return UTF8ToString(Number(ret))}if(returnType==="pointer")return Number(ret);if(returnType==="boolean")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var previousAsync=Asyncify.currData;var ret=func(...cArgs);function onDone(ret){runtimeKeepalivePop();if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}var asyncMode=opts?.async;runtimeKeepalivePush();if(Asyncify.currData!=previousAsync){return Asyncify.whenDone().then(onDone)}ret=onDone(ret);if(asyncMode)return Promise.resolve(ret);return ret};if(ENVIRONMENT_IS_WASM_WORKER){_wasmWorkers[0]=globalThis;addEventListener("message",_wasmWorkerAppendToQueue)}Module["requestAnimationFrame"]=MainLoop.requestAnimationFrame;Module["pauseMainLoop"]=MainLoop.pause;Module["resumeMainLoop"]=MainLoop.resume;MainLoop.init();{initMemory();if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];if(Module["preloadPlugins"])preloadPlugins=Module["preloadPlugins"];if(Module["print"])out=Module["print"];if(Module["printErr"])err=Module["printErr"];if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].shift()()}}}Module["ccall"]=ccall;Module["setValue"]=setValue;Module["getValue"]=getValue;Module["UTF8ToString"]=UTF8ToString;Module["stringToUTF8"]=stringToUTF8;Module["lengthBytesUTF8"]=lengthBytesUTF8;Module["writeArrayToMemory"]=writeArrayToMemory;var ASM_CONSTS={6285:$0=>{if(!window.Ko.Hx_SyDx_vsg){window.Ko.Hx_SyDx_vsg=UTF8ToString($0)}},6366:()=>{OPFS_SmeStx()},6383:()=>{emscripten_throw_string("TEST THROW ERR")}};var _main,_SmaHe,_Hrz5_Ki__BriSmz__Yi,_Hrz5_Ki__BriSmz__Ya,_malloc,_Hrz5_Ki__BriSmz__Yo,_Hrz5_Ki__BriSmz__Yu,_Hrz5_Ki__BriSmz__Ye,_Hre7_Me__GiDx__HMS,_Hra1_Mz__JeKz__BriYa,_Hra1_Mz__JeKz__BriYe,_HEAPO_wf,_Hri5_Ye__Sme,__emscripten_timeout,_free,__emscripten_stack_restore,__emscripten_stack_alloc,_emscripten_stack_get_current,__emscripten_wasm_worker_initialize,dynCall_jijj,dynCall_iijj,dynCall_v,dynCall_jjjj,dynCall_ijdiiii,dynCall_vjj,dynCall_vi,_asyncify_start_unwind,_asyncify_stop_unwind,_asyncify_start_rewind,_asyncify_stop_rewind;function assignWasmExports(wasmExports){Module["_main"]=_main=wasmExports["fa"];Module["_SmaHe"]=_SmaHe=wasmExports["ga"];Module["_Hrz5_Ki__BriSmz__Yi"]=_Hrz5_Ki__BriSmz__Yi=wasmExports["ha"];Module["_Hrz5_Ki__BriSmz__Ya"]=_Hrz5_Ki__BriSmz__Ya=wasmExports["ia"];Module["_malloc"]=_malloc=wasmExports["ja"];Module["_Hrz5_Ki__BriSmz__Yo"]=_Hrz5_Ki__BriSmz__Yo=wasmExports["ka"];Module["_Hrz5_Ki__BriSmz__Yu"]=_Hrz5_Ki__BriSmz__Yu=wasmExports["la"];Module["_Hrz5_Ki__BriSmz__Ye"]=_Hrz5_Ki__BriSmz__Ye=wasmExports["ma"];Module["_Hre7_Me__GiDx__HMS"]=_Hre7_Me__GiDx__HMS=wasmExports["na"];Module["_Hra1_Mz__JeKz__BriYa"]=_Hra1_Mz__JeKz__BriYa=wasmExports["oa"];Module["_Hra1_Mz__JeKz__BriYe"]=_Hra1_Mz__JeKz__BriYe=wasmExports["pa"];Module["_HEAPO_wf"]=_HEAPO_wf=wasmExports["qa"];Module["_Hri5_Ye__Sme"]=_Hri5_Ye__Sme=wasmExports["ra"];__emscripten_timeout=wasmExports["sa"];Module["_free"]=_free=wasmExports["ua"];__emscripten_stack_restore=wasmExports["va"];__emscripten_stack_alloc=wasmExports["wa"];_emscripten_stack_get_current=wasmExports["xa"];__emscripten_wasm_worker_initialize=wasmExports["ya"];dynCalls["jijj"]=dynCall_jijj=wasmExports["za"];dynCalls["iijj"]=dynCall_iijj=wasmExports["Aa"];dynCalls["v"]=dynCall_v=wasmExports["Ba"];dynCalls["jjjj"]=dynCall_jjjj=wasmExports["Ca"];dynCalls["ijdiiii"]=dynCall_ijdiiii=wasmExports["Da"];dynCalls["vjj"]=dynCall_vjj=wasmExports["Ea"];dynCalls["vi"]=dynCall_vi=wasmExports["Fa"];_asyncify_start_unwind=wasmExports["Ga"];_asyncify_stop_unwind=wasmExports["Ha"];_asyncify_start_rewind=wasmExports["Ia"];_asyncify_stop_rewind=wasmExports["Ja"]}var wasmImports;function assignWasmImports(){wasmImports={l:__abort_js,k:__emscripten_create_wasm_worker,i:__emscripten_runtime_keepalive_clear,j:__setitimer_js,ba:_emscripten_asm_const_async_on_main_thread,c:_emscripten_asm_const_int,q:_emscripten_cancel_main_loop,f:_emscripten_console_log,ca:_emscripten_date_now,P:_emscripten_get_canvas_element_size,n:_emscripten_get_gamepad_status,b:_emscripten_get_heap_max,p:_emscripten_get_num_gamepads,O:_emscripten_get_screen_size,aa:_emscripten_html5_remove_all_event_listeners,T:_emscripten_performance_now,m:_emscripten_resize_heap,d:_emscripten_run_script,r:_emscripten_sample_gamepad_data,_:_emscripten_set_batterychargingchange_callback_on_thread,Z:_emscripten_set_batterylevelchange_callback_on_thread,$:_emscripten_set_beforeunload_callback_on_thread,Y:_emscripten_set_blur_callback_on_thread,I:_emscripten_set_click_callback_on_thread,H:_emscripten_set_dblclick_callback_on_thread,R:_emscripten_set_devicemotion_callback_on_thread,S:_emscripten_set_deviceorientation_callback_on_thread,X:_emscripten_set_focus_callback_on_thread,W:_emscripten_set_focusin_callback_on_thread,V:_emscripten_set_focusout_callback_on_thread,N:_emscripten_set_fullscreenchange_callback_on_thread,x:_emscripten_set_gamepadconnected_callback_on_thread,w:_emscripten_set_gamepaddisconnected_callback_on_thread,K:_emscripten_set_keydown_callback_on_thread,J:_emscripten_set_keyup_callback_on_thread,G:_emscripten_set_mousedown_callback_on_thread,B:_emscripten_set_mouseenter_callback_on_thread,A:_emscripten_set_mouseleave_callback_on_thread,C:_emscripten_set_mousemove_callback_on_thread,y:_emscripten_set_mouseout_callback_on_thread,z:_emscripten_set_mouseover_callback_on_thread,F:_emscripten_set_mouseup_callback_on_thread,Q:_emscripten_set_orientationchange_callback_on_thread,D:_emscripten_set_pointerlockchange_callback_on_thread,M:_emscripten_set_resize_callback_on_thread,L:_emscripten_set_scroll_callback_on_thread,s:_emscripten_set_touchcancel_callback_on_thread,u:_emscripten_set_touchend_callback_on_thread,t:_emscripten_set_touchmove_callback_on_thread,v:_emscripten_set_touchstart_callback_on_thread,U:_emscripten_set_visibilitychange_callback_on_thread,E:_emscripten_set_wheel_callback_on_thread,g:_emscripten_set_window_title,da:_emscripten_terminate_all_wasm_workers,o:_emscripten_wasm_worker_post_function_v,e:_emscripten_wasm_worker_self_id,a:wasmMemory,h:_proc_exit}}function applySignatureConversions(wasmExports){wasmExports=Object.assign({},wasmExports);var makeWrapper___PP=f=>(a0,a1,a2)=>f(a0,BigInt(a1?a1:0),BigInt(a2?a2:0));var makeWrapper_pp=f=>a0=>Number(f(BigInt(a0)));var makeWrapper__p=f=>a0=>f(BigInt(a0));var makeWrapper_p=f=>()=>Number(f());var makeWrapper__p_=f=>(a0,a1)=>f(BigInt(a0),a1);var makeWrapper__p___=f=>(a0,a1,a2,a3)=>f(BigInt(a0),a1,a2,a3);var makeWrapper__p______=f=>(a0,a1,a2,a3,a4,a5,a6)=>f(BigInt(a0),a1,a2,a3,a4,a5,a6);var makeWrapper__p__=f=>(a0,a1,a2)=>f(BigInt(a0),a1,a2);wasmExports["fa"]=makeWrapper___PP(wasmExports["fa"]);wasmExports["ja"]=makeWrapper_pp(wasmExports["ja"]);wasmExports["ua"]=makeWrapper__p(wasmExports["ua"]);wasmExports["va"]=makeWrapper__p(wasmExports["va"]);wasmExports["wa"]=makeWrapper_pp(wasmExports["wa"]);wasmExports["xa"]=makeWrapper_p(wasmExports["xa"]);wasmExports["ya"]=makeWrapper__p_(wasmExports["ya"]);wasmExports["za"]=makeWrapper__p___(wasmExports["za"]);wasmExports["Aa"]=makeWrapper__p___(wasmExports["Aa"]);wasmExports["Ba"]=makeWrapper__p(wasmExports["Ba"]);wasmExports["Ca"]=makeWrapper__p___(wasmExports["Ca"]);wasmExports["Da"]=makeWrapper__p______(wasmExports["Da"]);wasmExports["Ea"]=makeWrapper__p__(wasmExports["Ea"]);wasmExports["Fa"]=makeWrapper__p_(wasmExports["Fa"]);wasmExports["Ga"]=makeWrapper__p(wasmExports["Ga"]);wasmExports["Ia"]=makeWrapper__p(wasmExports["Ia"]);return wasmExports}function callMain(args=[]){var entryFunction=_main;args.unshift(thisProgram);var argc=args.length;var argv=stackAlloc((argc+1)*8);var argv_ptr=argv;args.forEach(arg=>{(growMemViews(),HEAPU64)[argv_ptr/8]=BigInt(stringToUTF8OnStack(arg));argv_ptr+=8});(growMemViews(),HEAPU64)[argv_ptr/8]=BigInt(0);try{var ret=entryFunction(argc,BigInt(argv));exitJS(ret,true);return ret}catch(e){return handleException(e)}}function run(args=arguments_){if(runDependencies>0){dependenciesFulfilled=run;return}if(ENVIRONMENT_IS_WASM_WORKER){initRuntime();return}preRun();if(runDependencies>0){dependenciesFulfilled=run;return}function doRun(){Module["calledRun"]=true;if(ABORT)return;initRuntime();preMain();Module["onRuntimeInitialized"]?.();var noInitialRun=Module["noInitialRun"]||false;if(!noInitialRun)callMain(args);postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(()=>{setTimeout(()=>Module["setStatus"](""),1);doRun()},1)}else{doRun()}}var wasmExports;if(!ENVIRONMENT_IS_WASM_WORKER){createWasm();run()}
